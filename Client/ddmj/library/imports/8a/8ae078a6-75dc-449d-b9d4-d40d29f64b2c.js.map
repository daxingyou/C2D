{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\MJ_Ting.ts"],"names":[],"mappings":";;;;;AACM,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAI5C,mCAAqC;AACrC,kDAAoD;AAEpD;IAAqC,2BAAY;IADjD;QAAA,qEAyEC;QAtEG;;;;;WAKG;QAEH,eAAS,GAAY,IAAI,CAAC;QAE1B;;;;WAIG;QACH,mBAAa,GAAa,IAAI,CAAC;QAE/B;;;;;WAKG;QACH,qBAAe,GAAc,EAAE,CAAC;;IAgDpC,CAAC;IA/CG,wBAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,UAAU,EAAE,UAAC,KAA0B;YAChD,KAAK,CAAC,eAAe,EAAE,CAAC;QAC5B,CAAC,EAAE,IAAI,CAAC,CAAC;QACT,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC,YAAY,CAAC,UAAU,CAAC,CAAC;IAChF,CAAC;IAED;;;;;OAKG;IACH,0BAAQ,GAAR,UAAS,OAAqB;QAC1B,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,UAAA,QAAQ;YACjC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;YAChC,QAAQ,CAAC,OAAO,EAAE,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;QAChC,EAAE,CAAC,CAAC,OAAO,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAChC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;YAChD,EAAE,CAAC,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBACrB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE,CAAC;oBACtC,IAAI,QAAQ,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;oBAC9C,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC;oBAC1C,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC;oBAC5B,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;gBACxC,CAAC;YACL,CAAC;QACL,CAAC;IACL,CAAC;IAED;;;;;;OAMG;IACH,gCAAc,GAAd,UAAe,IAAgB,EAAE,QAAiB;QAC9C,IAAI,GAAG,GAAY,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC;QACpD,IAAI,MAAM,GAAW,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;QACrE,IAAI,GAAG,GAAmB,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QACjE,GAAG,CAAC,QAAQ,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;QAC1B,IAAI,UAAU,GAAG,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QAC1C,GAAG,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;IAC7B,CAAC;IA9DD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACQ;IATT,OAAO;QAD3B,OAAO;OACa,OAAO,CAwE3B;IAAD,cAAC;CAxED,AAwEC,CAxEoC,EAAE,CAAC,SAAS,GAwEhD;kBAxEoB,OAAO","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nimport MJCanvas from './MJCanvas';\r\nimport MJ_Card from './MJ_Card';\r\nimport * as MJ_Help from './MJ_Help';\r\nimport * as dd from './../../Modules/ModuleManager';\r\n@ccclass\r\nexport default class MJ_Ting extends cc.Component {\r\n\r\n    /**\r\n     * 牌节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Ting\r\n     */\r\n    @property(cc.Node)\r\n    node_card: cc.Node = null;\r\n\r\n    /**\r\n     * canvas脚本\r\n     * \r\n     * @memberof MJ_Table\r\n     */\r\n    _canvasTarget: MJCanvas = null;\r\n\r\n    /**\r\n     * 牌节点列表\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof MJ_Ting\r\n     */\r\n    _node_card_list: cc.Node[] = [];\r\n    onLoad() {\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            event.stopPropagation();\r\n        }, this);\r\n        this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n    }\r\n\r\n    /**\r\n     * 初始化数据\r\n     * \r\n     * @param {CardAttrib[]} cardIds (cardId不能用)\r\n     * @memberof MJ_Ting\r\n     */\r\n    initData(cardIds: CardAttrib[]) {\r\n        this._node_card_list.forEach(cardNode => {\r\n            cardNode.removeFromParent(true);\r\n            cardNode.destroy();\r\n        });\r\n        this._node_card_list.length = 0;\r\n        if (cardIds && cardIds.length > 0) {\r\n            this.updateCardData(cardIds[0], this.node_card);\r\n            if (cardIds.length > 1) {\r\n                for (var i = 1; i < cardIds.length; i++) {\r\n                    let cardNode = cc.instantiate(this.node_card);\r\n                    this.updateCardData(cardIds[i], cardNode);\r\n                    cardNode.parent = this.node;\r\n                    this._node_card_list.push(cardNode);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 刷新牌数据\r\n     * \r\n     * @param {number} card 牌数据 (cardId不能用)\r\n     * @param {cc.Node} CardNode 牌节点\r\n     * @memberof MJ_Ting\r\n     */\r\n    updateCardData(Card: CardAttrib, CardNode: cc.Node) {\r\n        let hcs: MJ_Card = CardNode.getComponent('MJ_Card');\r\n        let cardId: number = (Card.suit - 1) * 36 + (Card.point - 1) * 4 + 1;\r\n        let csf: cc.SpriteFrame = this._canvasTarget.getMJCardSF(cardId);\r\n        hcs.initData(cardId, csf);\r\n        let isShowMask = MJ_Help.getDieTing(Card);\r\n        hcs.showMask(isShowMask);\r\n    }\r\n}\r\n"]}