{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\MJ_PlayerUI.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport MJCanvas from './MJCanvas';\r\nimport * as MJ_Help from './MJ_Help';\r\nimport * as dd from './../../Modules/ModuleManager';\r\n@ccclass\r\nexport default class MJ_PlayerUI extends cc.Component {\r\n\r\n    /**\r\n     * 头像\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Sprite)\r\n    headImg: cc.Sprite = null;\r\n\r\n    /**\r\n     * 名称\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Label)\r\n    lblName: cc.Label = null;\r\n\r\n    /**\r\n     * 分数\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Label)\r\n    lblScore: cc.Label = null;\r\n\r\n    /**\r\n     * 庄节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Node)\r\n    node_d: cc.Node = null;\r\n\r\n    /**\r\n     * 离线节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Node)\r\n    node_offLine: cc.Node = null;\r\n\r\n    /**\r\n     * 缺花色(1=万,2=筒,3=条)\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    @property(cc.Sprite)\r\n    unSuit: cc.Sprite = null;\r\n\r\n    /**\r\n     *玩家信息\r\n     * \r\n     * @type {SeatVo}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    _seatInfo: SeatVo = null;\r\n\r\n    /**\r\n     * canvas脚本\r\n     * \r\n     * @type {MJCanvas}\r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    _canvasTarget: MJCanvas = null;\r\n    onLoad() {\r\n        this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n        this.node.on(cc.Node.EventType.TOUCH_END, (event: cc.Event.EventTouch) => {\r\n            if (dd.gm_manager.touchTarget) return;\r\n            this._canvasTarget.showRoleInfo(this._seatInfo.accountId);\r\n            event.stopPropagation();\r\n        }, this);\r\n    }\r\n\r\n    /**\r\n     * 显示信息\r\n     * \r\n     * @memberof MJ_PlayerUI\r\n     */\r\n    async showInfo(seatInfo: SeatVo) {\r\n        this._seatInfo = seatInfo;\r\n        if (this._seatInfo.nick.length > 4) {\r\n            this.lblName.horizontalAlign = cc.Label.HorizontalAlign.LEFT;\r\n        } else {\r\n            this.lblName.horizontalAlign = cc.Label.HorizontalAlign.CENTER;\r\n        }\r\n        this.lblName.string = this._seatInfo.nick;\r\n        this.lblScore.string = this._seatInfo.score + '';\r\n        let headSF = null;\r\n        try {\r\n            headSF = await dd.img_manager.loadURLImage(this._seatInfo.headImg);\r\n        } catch (error) {\r\n            cc.log('获取头像错误');\r\n        }\r\n        this.headImg.spriteFrame = headSF;\r\n        //如果座位号是庄家座位号\r\n        if (this._seatInfo.seatIndex === dd.gm_manager.mjGameData.tableBaseVo.bankerIndex) {\r\n            this.node_d.active = true;\r\n        } else {\r\n            this.node_d.active = false;\r\n        }\r\n        //如果玩家的在线状态是 离线\r\n        if (this._seatInfo.onLine === 0) {\r\n            this.node_offLine.active = true;\r\n        } else {\r\n            this.node_offLine.active = false;\r\n        }\r\n        //如果存在打缺 缺花色(1=万,2=筒,3=条)\r\n        if (this._seatInfo.unSuit > 0 && dd.gm_manager.mjGameData.tableBaseVo.gameState > MJ_Help.MJ_GameState.STATE_TABLE_DINGQUE) {\r\n            this.unSuit.node.active = true;\r\n            this.unSuit.spriteFrame = this._canvasTarget.unSuit_list[this._seatInfo.unSuit - 1];\r\n        } else {\r\n            this.unSuit.node.active = false;\r\n        }\r\n\r\n    }\r\n}\r\n"]}