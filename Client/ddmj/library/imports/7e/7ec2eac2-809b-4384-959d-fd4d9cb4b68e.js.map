{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\Game_Over_Item.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\nimport * as dd from './../../Modules/ModuleManager';\r\nimport MJCanvas from './MJCanvas';\r\nimport MJ_Card from './MJ_Card';\r\nimport * as MJ_Help from './MJ_Help';\r\n@ccclass\r\nexport default class Game_Over_Item extends cc.Component {\r\n    @property(cc.Node)\r\n    node_light: cc.Node = null;\r\n    /**\r\n     * 头像\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Sprite)\r\n    imgHead: cc.Sprite = null;\r\n\r\n    /**\r\n     * 名字\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblName: cc.Label = null;\r\n    /**\r\n     * 玩家打牌过程中的一些操作描述\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblDes: cc.Label = null;\r\n\r\n    /**\r\n     * 加减分数\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblScore: cc.Label = null;\r\n    /**\r\n     * 番数\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblFan: cc.Label = null;\r\n    /**\r\n     * hu次数\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblHu: cc.Label = null;\r\n\r\n    /**\r\n     * 庄家节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Node)\r\n    node_banker: cc.Node = null;\r\n\r\n    /**\r\n     * 碰、杠牌的父节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Node)\r\n    node_group: cc.Node = null;\r\n\r\n    /**\r\n     * 手牌牌的父节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Node)\r\n    node_hand: cc.Node = null;\r\n\r\n    /**\r\n     * 胡牌的父节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Game_Over_Item\r\n     */\r\n    @property(cc.Node)\r\n    node_hu: cc.Node = null;\r\n    /**\r\n     * canvas脚本\r\n     * \r\n     * @memberof MJ_Table\r\n     */\r\n    _canvasTarget: MJCanvas = null;\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    /**\r\n     * 刷新item信息\r\n     * \r\n     * @memberof Game_Over_Item\r\n     */\r\n    async updateItem(index: number, data: SettlementOnceVo) {\r\n        this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n\r\n        this.lblName.string = data.nick;\r\n        this.lblScore.string = data.score + '';\r\n        this.lblDes.string = data.huPaiDesc;\r\n        this.lblFan.string = data.rate + '番';\r\n        if (data.huPaiIndex > 0) {\r\n            this.lblHu.node.active = true;\r\n            this.lblHu.string = data.huPaiIndex + '胡';\r\n        } else {\r\n            this.lblHu.node.active = false;\r\n        }\r\n        this.node_light.active = index % 2 === 0 ? true : false;\r\n        this.node_banker.active = data.banker === 0 ? false : true;\r\n\r\n        this.node_group.removeAllChildren();\r\n        this.node_hand.removeAllChildren();\r\n        this.node_hu.removeAllChildren();\r\n\r\n        let minGang = [];\r\n        if (data.baGangCards) {\r\n            minGang = data.baGangCards;\r\n        }\r\n        if (data.dianGangCards) {\r\n            minGang = minGang.concat(data.dianGangCards);\r\n        }\r\n        if (minGang) {\r\n            for (var i = 0; i < minGang.length; i++) {\r\n                this._canvasTarget.showGroupCard(1, minGang[i], 0, this.node_group);\r\n            }\r\n        }\r\n        if (data.anGangCards) {\r\n            for (var i = 0; i < data.anGangCards.length; i++) {\r\n                this._canvasTarget.showGroupCard(2, data.anGangCards[i], 0, this.node_group);\r\n            }\r\n        }\r\n        if (data.pengCards) {\r\n            for (var i = 0; i < data.pengCards.length; i++) {\r\n                this._canvasTarget.showGroupCard(0, data.pengCards[i], 0, this.node_group);\r\n            }\r\n        }\r\n        //如果没有杠牌和碰牌\r\n        if (this.node_group.childrenCount === 0) {\r\n            this.node_group.active = false;\r\n        }\r\n        if (data.handCards) {\r\n            let handCards = MJ_Help.getSortCardByCardIds(data.handCards);\r\n            for (var i = 0; i < handCards.length; i++) {\r\n                this._canvasTarget.showMineCard(handCards[handCards.length - 1 - i], this.node_hand, false, (cardNode: cc.Node) => {\r\n                    cardNode.scale = 0.8;\r\n                    let mcm: MJ_Card = cardNode.getComponent('MJ_Card');\r\n                    mcm.showMask(false);\r\n                });\r\n            }\r\n        }\r\n        if (data.huCards) {\r\n            for (var i = 0; i < data.huCards.length; i++) {\r\n                this._canvasTarget.showMineCard(data.huCards[i], this.node_hu, false, (cardNode: cc.Node) => {\r\n                    cardNode.scale = 0.8;\r\n                    let mcm: MJ_Card = cardNode.getComponent('MJ_Card');\r\n                    mcm.showMask(false);\r\n                });\r\n            }\r\n        }\r\n\r\n        let headSF = null;\r\n        try {\r\n            headSF = await dd.img_manager.loadURLImage(data.headImg);\r\n        } catch (error) {\r\n            cc.log('获取头像错误');\r\n        }\r\n        this.imgHead.spriteFrame = headSF;\r\n    }\r\n}\r\n"]}