{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home/assets\\Script\\SceneScript\\Home\\Store.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["\r\nimport * as dd from './../../Modules/ModuleManager';\r\nimport { productids } from '../../Modules/Config';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Store extends cc.Component {\r\n    /**\r\n     * ios的商城界面\r\n     * @type {cc.Node}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Node)\r\n    node_ios: cc.Node = null;\r\n\r\n    /**\r\n     * android的商城界面\r\n     * @type {cc.Node}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Node)\r\n    node_android: cc.Node = null;\r\n    /**\r\n     * ios游戏代理咨询名称\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Label)\r\n    lbl_ios_desName: cc.Label = null;\r\n    /**\r\n     * ios 游戏代理咨询联系\r\n     * @type {cc.Label}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Label)\r\n    lbl_ios_desContent: cc.Label = null;\r\n\r\n    /**\r\n     * android游戏代理咨询名称\r\n     * \r\n     * @type {[cc.Label]}\r\n     * @memberof Store\r\n     */\r\n    @property([cc.Label])\r\n    lbl_android_desName: cc.Label[] = [];\r\n    /**\r\n     * android游戏代理咨询联系\r\n     * @type {[cc.Label]}\r\n     * @memberof Store\r\n     */\r\n    @property([cc.Label])\r\n    lbl_android_desContent: cc.Label[] = [];\r\n    /**\r\n     * 商品列表\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Node)\r\n    itemBoard: cc.Node = null;\r\n\r\n    items: cc.Node[] = [];\r\n\r\n    selectProduct: Product = null;\r\n\r\n    /**\r\n     * 商品预设\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof Store\r\n     */\r\n    @property(cc.Prefab)\r\n    store_item_prefab: cc.Prefab = null;\r\n\r\n    @property([cc.SpriteFrame])\r\n    imgGoodsList: cc.SpriteFrame[] = [];\r\n\r\n    products: Product[] = null;\r\n    proxys: MallProxyItem[] = null;\r\n\r\n    /**\r\n     * 商品节点列表\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof Store\r\n     */\r\n    _node_goods_list: cc.Node[] = [];\r\n\r\n    cb_iapBack: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        let state: number = event.detail;\r\n        switch (state) {\r\n            case 0://支付成功，校验成功\r\n                let obj = { 'num': parseInt(this.selectProduct.title) };\r\n                let msg = JSON.stringify(obj);\r\n                dd.ws_manager.sendMsg(dd.protocol.MALL_ITEM_BUY_OK, msg, (flag: number, content?: any) => {\r\n                    if (flag === 0) {//成功\r\n                        dd.ui_manager.showAlert('购买成功!', '温馨提示', null, null, 1);\r\n                    } else if (flag === -1) {//超时\r\n                    } else {//失败,content是一个字符串\r\n                        dd.ui_manager.showTip(content);\r\n                    }\r\n                });\r\n                break;\r\n            case -2://支付失败\r\n                dd.ui_manager.showAlert('支付失败!', '温馨提示', null, null, 1);\r\n                break;\r\n            case -4://支付成功，校验失败\r\n                dd.ui_manager.showAlert('支付成功，校验失败!', '温馨提示', null, null, 1);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.node.removeFromParent(true);\r\n        this.node.destroy();\r\n    };\r\n\r\n    onLoad() {\r\n        cc.systemEvent.on('cb_iapBack', this.cb_iapBack, this);\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            dd.ui_manager.isShowPopup = true;\r\n            this.node.removeFromParent(true);\r\n            this.node.destroy();\r\n            event.stopPropagation();\r\n        }, this);\r\n\r\n        if (this.products) {//手机IOS端\r\n            this.node_android.active = false;\r\n            this.node_ios.active = true;\r\n            //显示商品列表\r\n            this.showGoodsList();\r\n            //显示ios游戏代理\r\n            this.showIosPoxy();\r\n        } else {\r\n            this.node_android.active = true;\r\n            this.node_ios.active = false;\r\n            //显示android的游戏代理列表\r\n            this.showAndroidPoxy();\r\n        }\r\n    }\r\n\r\n    onDestroy() {\r\n        cc.systemEvent.off('cb_iapBack', this.cb_iapBack, this);\r\n    }\r\n\r\n    init(proxyItems: MallProxyItem[], products?: Product[]) {\r\n        this.proxys = proxyItems;\r\n        this.products = products;\r\n    }\r\n\r\n    /**\r\n     * 显示android的代理商\r\n     * @memberof Store\r\n     */\r\n    showAndroidPoxy() {\r\n        for (var i = 0; i < this.lbl_android_desContent.length; i++) {\r\n            if (this.proxys && this.proxys[i]) {\r\n                this.lbl_android_desContent[i].node.parent.active = true;\r\n                this.lbl_android_desName[i].string = this.proxys[i].proxyType;\r\n                this.lbl_android_desContent[i].string = this.proxys[i].wxNO + '   [' + this.proxys[i].proxyDesc + ']';\r\n            } else {\r\n                this.lbl_android_desContent[i].node.parent.active = false;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 显示ios的代理商 \r\n     * @memberof Store\r\n     */\r\n    showIosPoxy() {\r\n        if (this.proxys && this.proxys[0]) {\r\n            this.lbl_ios_desContent.node.parent.active = true;\r\n            this.lbl_ios_desName.string = this.proxys[0].proxyType;\r\n            this.lbl_ios_desContent.string = this.proxys[0].wxNO + '   [' + this.proxys[0].proxyDesc + ']';\r\n        } else {\r\n            this.lbl_ios_desContent.node.parent.active = false;\r\n        }\r\n    }\r\n    /**\r\n     * 显示商品列表\r\n     * \r\n     * @memberof Store\r\n     */\r\n    showGoodsList(): void {\r\n        this.itemBoard.removeAllChildren();\r\n        this.items = [];\r\n        if (this.products) {\r\n            for (var i = 0; i < this.products.length; i++) {\r\n                let store_item = cc.instantiate(this.store_item_prefab);\r\n                store_item.tag = i;\r\n                cc.find('img', store_item).getComponent(cc.Sprite).spriteFrame = this.imgGoodsList[i];\r\n                cc.find('priceLayout/price', store_item).getComponent(cc.Label).string = parseInt(this.products[i].price).toString();\r\n                cc.find('countLayout/count', store_item).getComponent(cc.Label).string = this.products[i].title;\r\n                let select = cc.find('select', store_item);\r\n                if (i === 0) {\r\n                    select.active = true;\r\n                    this.selectProduct = this.products[0];\r\n                } else {\r\n                    select.active = false;\r\n                }\r\n                store_item.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n                    dd.mp_manager.playButton();\r\n                    this.items.forEach((item: cc.Node) => {\r\n                        let select = cc.find('select', item);\r\n                        if (item === event.currentTarget) {\r\n                            select.active = true;\r\n                            this.selectProduct = this.products[item.tag];\r\n                        } else {\r\n                            select.active = false;\r\n                        }\r\n                    }, this);\r\n                }, this);\r\n                store_item.parent = this.itemBoard;\r\n                this.items.push(store_item);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 购买商品\r\n     * \r\n     * @memberof Store\r\n     */\r\n    click_btn_buy(): void {\r\n        dd.mp_manager.playButton();\r\n        if (this.selectProduct) {\r\n            dd.ui_manager.showLoading('正在向苹果请求交易，请稍后');\r\n            dd.js_call_native.buyProduct(this.selectProduct.productid, dd.ud_manager.mineData.accountId + Date.now);\r\n        }\r\n    }\r\n    /**\r\n     * ios的复制按钮\r\n     * @memberof Store\r\n     */\r\n    click_btn_copy_ios(): void {\r\n        dd.mp_manager.playButton();\r\n        if (this.proxys && this.proxys[0]) {\r\n            let copyStr = this.proxys[0].wxNO;\r\n            dd.js_call_native.copyToClipboard(copyStr);\r\n            dd.ui_manager.showTip('复制成功!');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * android的复制按钮\r\n     * @memberof Store\r\n     */\r\n    click_btn_copy_android(event, type: string): void {\r\n        dd.mp_manager.playButton();\r\n        if (this.proxys && this.proxys[Number(type)]) {\r\n            let copyStr = this.proxys[Number(type)].wxNO;\r\n            dd.js_call_native.copyToClipboard(copyStr);\r\n            dd.ui_manager.showTip('复制成功!');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 退出商城\r\n     * \r\n     * @memberof Store\r\n     */\r\n    click_btn_out(): void {\r\n        dd.mp_manager.playButton();\r\n        dd.ui_manager.isShowPopup = true;\r\n        this.node.removeFromParent(true);\r\n        this.node.destroy();\r\n    }\r\n}\r\n"]}