{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\MJ_Gang.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nimport MJCanvas from './MJCanvas';\r\nimport MJ_Card from './MJ_Card';\r\nimport * as MJ_Help from './MJ_Help';\r\nimport * as dd from './../../Modules/ModuleManager';\r\n@ccclass\r\nexport default class MJ_Gang extends cc.Component {\r\n\r\n    /**\r\n     * 牌节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Gang\r\n     */\r\n    @property(cc.Node)\r\n    node_card: cc.Node = null;\r\n\r\n    /**\r\n     * 牌父节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Gang\r\n     */\r\n    @property(cc.Node)\r\n    nodeLayout: cc.Node = null;\r\n\r\n    /**\r\n     * canvas脚本\r\n     * \r\n     * @memberof MJ_Table\r\n     */\r\n    _canvasTarget: MJCanvas = null;\r\n\r\n    /**\r\n     * 调用的父节点\r\n     * \r\n     * @type {any}\r\n     * @memberof MJ_Gang\r\n     */\r\n    _target = null;\r\n\r\n    MJ_Gang_Touch_Start = (event: cc.Event.EventTouch) => {\r\n        let cardNode: cc.Node = event.currentTarget;\r\n        cardNode.color = cc.Color.GRAY;\r\n        event.stopPropagation();\r\n    };\r\n    MJ_Gang_Touch_End = (event: cc.Event.EventTouch) => {\r\n        let cardNode: cc.Node = event.currentTarget;\r\n        cardNode.color = cc.Color.WHITE;\r\n        let hcs: MJ_Card = cardNode.getComponent('MJ_Card');\r\n        this._canvasTarget.sendOtherBreakCard(MJ_Help.MJ_Act_Type.ACT_INDEX_GANG, hcs._cardId, null);\r\n        this.node.removeFromParent(true);\r\n        this.node.destroy();\r\n        event.stopPropagation();\r\n    };\r\n    onLoad() {\r\n        this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            this._target.node_state.active = true;\r\n            this.node.removeFromParent(true);\r\n            this.node.destroy();\r\n            event.stopPropagation();\r\n        }, this);\r\n\r\n        this.node_card.on(\"touchstart\", this.MJ_Gang_Touch_Start, this);\r\n        this.node_card.on(\"touchend\", this.MJ_Gang_Touch_End, this);\r\n    }\r\n\r\n    /**\r\n     * 初始化数据\r\n     * \r\n     * @param {number[]} cardIds \r\n     * @memberof MJ_Gang\r\n     */\r\n    initData(cardIds: number[], target) {\r\n        this._target = target;\r\n        if (cardIds && cardIds.length > 0) {\r\n            this.updateCardData(cardIds[0], this.node_card);\r\n            if (cardIds.length > 1) {\r\n                for (var i = 1; i < cardIds.length; i++) {\r\n                    let cardNode = cc.instantiate(this.node_card);\r\n                    this.updateCardData(cardIds[i], cardNode);\r\n                    cardNode.on(\"touchstart\", this.MJ_Gang_Touch_Start, this);\r\n                    cardNode.on(\"touchend\", this.MJ_Gang_Touch_End, this);\r\n                    cardNode.parent = this.nodeLayout;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 刷新牌数据\r\n     * \r\n     * @param {number} card 牌数据\r\n     * @param {cc.Node} CardNode 牌节点\r\n     * @memberof MJ_Gang\r\n     */\r\n    updateCardData(Card: number, CardNode: cc.Node) {\r\n        let hcs: MJ_Card = CardNode.getComponent('MJ_Card');\r\n        let csf: cc.SpriteFrame = this._canvasTarget.getMJCardSF(Card);\r\n        hcs.initData(Card, csf);\r\n    }\r\n}\r\n"]}