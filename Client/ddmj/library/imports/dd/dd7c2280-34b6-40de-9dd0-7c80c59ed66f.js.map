{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\MJ_Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\nimport * as MJ_Help from './MJ_Help';\r\nimport * as dd from './../../Modules/ModuleManager';\r\nimport MJ_Game_Mine from './MJ_Game_Mine';\r\nimport MJ_Game_Others from './MJ_Game_Others';\r\nimport MJ_Card from './MJ_Card';\r\nimport MJ_Card_Group from './MJ_Card_Group';\r\nimport MJCanvas from './MJCanvas';\r\n@ccclass\r\nexport default class MJ_Game extends cc.Component {\r\n\r\n    /**\r\n     * 表态时间\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof MJ_Game\r\n     */\r\n    @property(cc.Label)\r\n    lblTime: cc.Label = null;\r\n\r\n    /**\r\n     * 游戏数据\r\n     * \r\n     * @type {cc.RichText}\r\n     * @memberof MJ_Game\r\n     */\r\n    @property(cc.RichText)\r\n    lblGameInfo: cc.RichText = null;\r\n\r\n    /**\r\n     * 轮到该谁表态的节点列表\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof MJ_Game\r\n     */\r\n    @property([cc.Node])\r\n    node_state_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 玩家打牌的节点列表\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof MJ_Game\r\n     */\r\n    @property([cc.Node])\r\n    node_player_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 杠、碰的父节点容器\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Play\r\n     */\r\n    @property(cc.Node)\r\n    node_group_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 打出的牌的父节点容器\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Play\r\n     */\r\n    @property(cc.Node)\r\n    node_playOut_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 动作、文字显示的父节点\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Play\r\n     */\r\n    @property(cc.Node)\r\n    node_act_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 胡牌的节点(牌的父节点)\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Play\r\n     */\r\n    @property(cc.Node)\r\n    node_hu_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 胡牌文字图片的父节点容器\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof MJ_Play\r\n     */\r\n    @property(cc.Node)\r\n    node_img_hu_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * \r\n     * 当前时间\r\n     * @type {string}\r\n     * @memberof MJ_Table\r\n     */\r\n    _nowTime: number = 0;\r\n\r\n    /**\r\n     * 刷新时间\r\n     * \r\n     * @type {number}\r\n     * @memberof MJ_Table\r\n     */\r\n    _cdTime: number = 0;\r\n\r\n    /**\r\n     * canvas脚本\r\n     * \r\n     * @type {MJCanvas}\r\n     * @memberof MJ_Play\r\n     */\r\n    _canvasTarget: MJCanvas = null;\r\n\r\n    onLoad() {\r\n        this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n    }\r\n\r\n    /**\r\n     * 初始化界面\r\n     * \r\n     * @memberof MJ_Play\r\n     */\r\n    initData() {\r\n        for (var i = 0; i < this.node_img_hu_list.length; i++) {\r\n            this.node_img_hu_list[i].active = false;\r\n        }\r\n        for (var i = 0; i < this.node_group_list.length; i++) {\r\n            this.node_group_list[i].removeAllChildren();\r\n        }\r\n        for (var i = 0; i < this.node_act_list.length; i++) {\r\n            this.node_act_list[i].removeAllChildren();\r\n        }\r\n        for (var i = 0; i < this.node_playOut_list.length; i++) {\r\n            this.node_playOut_list[i].removeAllChildren();\r\n        }\r\n        for (var i = 0; i < this.node_hu_list.length; i++) {\r\n            this.node_hu_list[i].removeAllChildren();\r\n        }\r\n    }\r\n\r\n    /**\r\n * 显示游戏桌子信息\r\n * \r\n * @memberof MJ_Game\r\n */\r\n    showTableState() {\r\n        this._nowTime = MJ_Help.getDiffTime(dd.gm_manager.mjGameData.tableBaseVo.svrTime, dd.gm_manager.mjGameData.tableBaseVo.actTime);\r\n        this.lblTime.string = this._nowTime + '';\r\n        this.lblGameInfo.string = '<color=#4ecab1>剩余 </c><color=#ffc600>' + dd.gm_manager.mjGameData.tableBaseVo.tableCardNum\r\n            + '</c><color=#4ecab1> 张</c><color=#4ecab1>   第 </c><color=#ffc600>'\r\n            + dd.gm_manager.mjGameData.tableBaseVo.currGameNum + '/' + dd.gm_manager.mjGameData.tableBaseVo.maxGameNum + '</c><color=#4ecab1> 局</c>';\r\n\r\n        let pIndex = MJ_Help.getIndexBySeatId(dd.gm_manager.mjGameData.tableBaseVo.btIndex);\r\n        for (var i = 0; i < this.node_state_list.length; i++) {\r\n            if (pIndex === i) {\r\n                this.node_state_list[i].active = true;\r\n            } else {\r\n                this.node_state_list[i].active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    update(dt) {\r\n        if (dd.gm_manager && !dd.gm_manager.isReplayPause) {\r\n            if (this._nowTime > 0) {\r\n                this._cdTime -= dt;\r\n                if (this._cdTime < 0) {\r\n                    this._cdTime = 1;\r\n                    this._nowTime--;\r\n                    this.lblTime.string = this._nowTime + '';\r\n                    //如果小于3s，每一秒都要振动一下\r\n                    if (this._nowTime <= 2) {\r\n                        this.showPhoneVibration();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 显示手机振动\r\n     * \r\n     * @memberof MJ_Game\r\n     */\r\n    showPhoneVibration() {\r\n        if (MJ_Help.MJ_GameState.STATE_TABLE_OVER_ALL !== dd.gm_manager.mjGameData.tableBaseVo.gameState\r\n            && MJ_Help.MJ_GameState.STATE_TABLE_OVER_ONCE !== dd.gm_manager.mjGameData.tableBaseVo.gameState\r\n            && MJ_Help.MJ_GameState.STATE_TABLE_DESTORY !== dd.gm_manager.mjGameData.tableBaseVo.gameState\r\n            && MJ_Help.MJ_GameState.STATE_TABLE_READY !== dd.gm_manager.mjGameData.tableBaseVo.gameState) {\r\n            let mySeatInfo = MJ_Help.getSeatById(dd.ud_manager.mineData.accountId);\r\n            if (mySeatInfo) {\r\n                //如果为胡碰杠阶段，就判断是否是自己胡碰杠的表态\r\n                if (MJ_Help.MJ_GameState.STATE_TABLE_FAPAI === dd.gm_manager.mjGameData.tableBaseVo.gameState) {\r\n                    dd.js_call_native.phoneVibration();\r\n                } else if (MJ_Help.MJ_GameState.STATE_TABLE_BREAKCARD === dd.gm_manager.mjGameData.tableBaseVo.gameState) {\r\n                    let isBreakCS = false;\r\n                    for (var i = 0; i < mySeatInfo.breakCardState.length; i++) {\r\n                        if (mySeatInfo.breakCardState[i] === 1) {\r\n                            isBreakCS = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (isBreakCS) {\r\n                        dd.js_call_native.phoneVibration();\r\n                    }\r\n                } else {\r\n                    //如果不为胡碰杠阶段，就判断是否是自己打牌表态\r\n                    if (mySeatInfo.seatIndex === dd.gm_manager.mjGameData.tableBaseVo.btIndex) {\r\n                        dd.js_call_native.phoneVibration();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示游戏信息\r\n     * \r\n     * @memberof MJ_Game\r\n     */\r\n    showGameInfo() {\r\n        if (!this._canvasTarget) {\r\n            this._canvasTarget = dd.ui_manager.getCanvasNode().getComponent('MJCanvas');\r\n        }\r\n        //如果在准备阶段，就初始化数据\r\n        if (dd.gm_manager.mjGameData.tableBaseVo.gameState <= MJ_Help.MJ_GameState.STATE_TABLE_READY) {\r\n            this.initData();\r\n        }\r\n        this.showTableState();\r\n        this.showPlayCard();\r\n    }\r\n\r\n    /**\r\n     * 显示打牌信息\r\n     * \r\n     * @memberof MJ_Game\r\n     */\r\n    showPlayCard() {\r\n        for (var i = 0; i < this.node_player_list.length; i++) {\r\n            let seatInfo = dd.gm_manager.mjGameData.seats[i];\r\n            if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                if (i === 0) {\r\n                    let mjMine: MJ_Game_Mine = this.node_player_list[i].getComponent('MJ_Game_Mine');\r\n                    mjMine.updatePlay(i, seatInfo);\r\n                } else {\r\n                    let mjOthers: MJ_Game_Others = this.node_player_list[i].getComponent('MJ_Game_Others');\r\n                    mjOthers.updatePlay(i, seatInfo);\r\n                }\r\n                this.showGroupCard(i, seatInfo);\r\n                this.showSeatPlayOutCard(i, seatInfo);\r\n                this.showPlayOutAct(i, seatInfo);\r\n                this.showHuPai(i, seatInfo);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示桌子上已经打出的牌中，是否有选中的这张牌\r\n     * \r\n     * @memberof MJ_Game\r\n     */\r\n    showTableSelectCard(cardId: number) {\r\n        let card: CardAttrib = MJ_Help.getCardById(cardId);\r\n        let node_out_list = [];\r\n        for (let sId = 0; sId < this.node_playOut_list.length; sId++) {\r\n            let node_playOut = this.node_playOut_list[sId];\r\n            if (node_playOut) {\r\n                node_out_list = node_out_list.concat(node_playOut.children);\r\n            }\r\n        }\r\n        for (var i = 0; i < node_out_list.length; i++) {\r\n            let outCard: cc.Node = node_out_list[i];\r\n            let oCard = MJ_Help.getCardById(outCard.tag);\r\n            let ocs = outCard.getComponent('MJ_Card');\r\n            if (oCard.suit === card.suit && oCard.point === card.point) {\r\n                ocs.showLight(true);\r\n            } else {\r\n                ocs.showLight(false);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示每个玩家的碰 、 杠牌\r\n     * @param {number} sId 座位索引\r\n     * @param {SeatVo} seatInfo 座位信息\r\n     * @memberof MJ_Play\r\n     */\r\n    showGroupCard(sId: number, seatInfo: SeatVo) {\r\n        let node_group = this.node_group_list[sId];\r\n        if (node_group) {\r\n            if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                //显示碰杠牌\r\n                node_group.removeAllChildren();\r\n                if (seatInfo.pengCards) {\r\n                    for (var i = 0; i < seatInfo.pengCards.length; i++) {\r\n                        this._canvasTarget.showGroupCard(0, seatInfo.pengCards[i], sId, node_group);\r\n                    }\r\n                }\r\n                if (seatInfo.baGangCards) {\r\n                    for (var i = 0; i < seatInfo.baGangCards.length; i++) {\r\n                        this._canvasTarget.showGroupCard(1, seatInfo.baGangCards[i], sId, node_group);\r\n                    }\r\n                }\r\n                if (seatInfo.anGangCards) {\r\n                    for (var i = 0; i < seatInfo.anGangCards.length; i++) {\r\n                        this._canvasTarget.showGroupCard(2, seatInfo.anGangCards[i], sId, node_group);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建打出的牌\r\n     * @param {number} index \r\n     * @param {cc.Node} node_playOut \r\n     * @param {number} sId \r\n     * @param {SeatVo} seatInfo \r\n     * @memberof MJ_Game\r\n     */\r\n    createOutCard(index: number, node_playOut: cc.Node, sId: number, seatInfo: SeatVo) {\r\n        this._canvasTarget.showPlayOutCard(sId, seatInfo.outUnUseCards[index], node_playOut, (cardNode: cc.Node) => {\r\n            if (sId === 0) {\r\n                let px = index % 10 * cardNode.width + cardNode.width / 2;\r\n                let py = Math.floor(index / 10) * (cardNode.height - 10) + cardNode.height / 2;\r\n                cardNode.setPosition(cc.p(px, py));\r\n                cardNode.zIndex = 99 - index;\r\n            } else if (sId === 1) {\r\n                let px = -Math.floor(index / 10) * cardNode.width - cardNode.width / 2;\r\n                let py = index % 10 * (cardNode.height - 12) + cardNode.height / 2;\r\n                cardNode.setPosition(cc.p(px, py));\r\n                cardNode.zIndex = 99 - index;\r\n            } else { }\r\n\r\n            //如果刚刚是这个玩家表态，最后一张牌亮(显示刚刚打出的牌亮起来)\r\n            if (seatInfo.outCard && index === seatInfo.outUnUseCards.length - 1\r\n                && seatInfo.seatIndex === dd.gm_manager.mjGameData.tableBaseVo.prevBtIndex) {\r\n                let ocs: MJ_Card = cardNode.getComponent('MJ_Card');\r\n                switch (sId) {\r\n                    case 0:\r\n                        ocs.showBS(true, 1, -1);\r\n                        break;\r\n                    case 1:\r\n                        ocs.showBS(true);\r\n                        break;\r\n                    case 2:\r\n                        ocs.showBS(true, -1, 1);\r\n                        break;\r\n                    case 3:\r\n                        ocs.showBS(true);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n    * 显示打出的牌\r\n    * @param {number} sId 座位索引\r\n    * @param {SeatVo} seatInfo 座位信息\r\n    * @memberof MJ_Play\r\n   */\r\n    showSeatPlayOutCard(sId: number, seatInfo: SeatVo) {\r\n        let node_playOut = this.node_playOut_list[sId];\r\n        if (node_playOut) {\r\n            if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                node_playOut.removeAllChildren();\r\n                if (seatInfo.outUnUseCards) {\r\n                    //刷新打出的牌数据\r\n                    for (var i = 0; i < seatInfo.outUnUseCards.length; i++) {\r\n                        this.createOutCard(i, node_playOut, sId, seatInfo);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示刚刚打出的牌的动作\r\n     * @param {number} sId 座位索引\r\n     * @param {SeatVo} seatInfo 座位信息\r\n     * @memberof MJ_Game\r\n     */\r\n    showPlayOutAct(sId: number, seatInfo: SeatVo) {\r\n        let node_act = this.node_act_list[sId];\r\n        if (node_act) {\r\n            if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                //轮到这个玩家在（出牌阶段）的（表态）时候，并且 这个玩家（已经表态）以及 存在(刚刚打出的牌)\r\n                if (dd.gm_manager.mjGameData.tableBaseVo.gameState === MJ_Help.MJ_GameState.STATE_TABLE_OUTCARD) {\r\n                    if (seatInfo.seatIndex === dd.gm_manager.mjGameData.tableBaseVo.btIndex\r\n                        && seatInfo.btState === MJ_Help.MJ_Act_State.ACT_STATE_BT\r\n                        && seatInfo.outCard) {\r\n                        this._canvasTarget.showOutActMJ(seatInfo.outCard, node_act, seatInfo);\r\n                        dd.mp_manager.playOut();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示胡牌\r\n     * @param {number} sId 座位索引\r\n     * @param {SeatVo} seatInfo 座位信息\r\n     * @memberof MJ_Play\r\n     */\r\n    showHuPai(sId: number, seatInfo: SeatVo) {\r\n        let node_hu = this.node_hu_list[sId];\r\n        let node_img_hu = this.node_img_hu_list[sId];\r\n        if (node_hu) {\r\n            node_hu.removeAllChildren();\r\n            //如果玩家不在（未胡牌）的状态，表示胡牌了，并且 （胡牌）存在\r\n            if (seatInfo.huPaiType !== 0 && seatInfo.huCards) {\r\n                for (var i = 0; i < seatInfo.huCards.length; i++) {\r\n                    this._canvasTarget.showPlayOutCard(sId, seatInfo.huCards[i], node_hu, (cardNode: cc.Node) => {\r\n                        let cs: MJ_Card = cardNode.getComponent('MJ_Card');\r\n                        cs.showLight(true);\r\n                    });\r\n                }\r\n                if (node_img_hu) {\r\n                    //显示文字图片\r\n                    node_img_hu.active = true;\r\n                    node_img_hu.getComponent(cc.Sprite).spriteFrame = seatInfo.huPaiType === 1 ? this._canvasTarget.mj_text_list[0] : this._canvasTarget.mj_text_list[1];\r\n                }\r\n            } else {\r\n                //不显示文字图片\r\n                node_img_hu.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示 胡杠碰状态的表态结果\r\n     * \r\n     * @memberof MJ_Game\r\n     */\r\n    showBreakStates() {\r\n        if (dd.gm_manager.mjGameData && dd.gm_manager.mjGameData.breakSeats) {\r\n            let breakSeats = dd.gm_manager.mjGameData.breakSeats;\r\n            let playIndex = 0;\r\n            //胡杠碰吃打断处理结果状态 breakState (0=胡,1=杠,2=碰,3=吃,4=过)\r\n            for (var i = 0; i < breakSeats.length; i++) {\r\n                //获取座位的索引\r\n                let sId = MJ_Help.getIndexBySeatId(breakSeats[i]);\r\n                if (sId !== -1 && this.node_player_list[sId]) {\r\n                    //根据索引，获取座位信息\r\n                    let seatInfo = dd.gm_manager.mjGameData.seats[sId];\r\n                    if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                        this.showBreakStateAct(dd.gm_manager.mjGameData.breakState, sId, seatInfo, playIndex);\r\n                        playIndex++;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 显示胡杠碰吃过 状态的动作\r\n     * @param {MJ_Help.MJ_Act_Type} breakState  (0=胡,1=杠,2=碰,3=吃,4=过)\r\n     * @param {number} sId 座位索引\r\n     * @param {SeatVo} seatInfo 座位信息\r\n     * @param {number} playIndex 播放索引，只有等于0 的时候才播放音效，因为在循环中，多次调用回造成 1在播放-释放的时候 2调用播放，但是被1释放了，崩溃\r\n     * @memberof MJ_Play\r\n     */\r\n    showBreakStateAct(breakState: MJ_Help.MJ_Act_Type, sId: number, seatInfo: SeatVo, playIndex: number) {\r\n        let node_act = this.node_act_list[sId];\r\n        if (node_act) {\r\n            let sf: cc.SpriteFrame = null;\r\n            switch (breakState) {\r\n                case MJ_Help.MJ_Act_Type.ACT_INDEX_HU:\r\n                    sf = this.getHuPaiSF(seatInfo);\r\n                    if (playIndex === 0) {\r\n                        if (seatInfo.huPaiType === 1) {\r\n                            dd.mp_manager.playPokerSound(dd.mp_manager.audioSetting.language, 4, seatInfo.sex, 4);\r\n                        } else {\r\n                            dd.mp_manager.playPokerSound(dd.mp_manager.audioSetting.language, 4, seatInfo.sex, 1);\r\n                        }\r\n                    }\r\n                    break;\r\n                case MJ_Help.MJ_Act_Type.ACT_INDEX_GANG:\r\n                    sf = this._canvasTarget.mj_text_list[7];\r\n                    if (playIndex === 0) {\r\n                        dd.mp_manager.playPokerSound(dd.mp_manager.audioSetting.language, 4, seatInfo.sex, 2);\r\n                    }\r\n                    switch (seatInfo.gangType) {\r\n                        case 1://自摸巴杠\r\n                            this._canvasTarget.showGFAct(node_act);\r\n                            break;\r\n                        case 2://暗杠\r\n                            this._canvasTarget.showXYAct(node_act);\r\n                            break;\r\n                        case 3://点杠\r\n                            this._canvasTarget.showXYAct(node_act);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    break;\r\n                case MJ_Help.MJ_Act_Type.ACT_INDEX_PENG:\r\n                    sf = this._canvasTarget.mj_text_list[6];\r\n                    if (playIndex === 0) {\r\n                        dd.mp_manager.playPokerSound(dd.mp_manager.audioSetting.language, 4, seatInfo.sex, 3);\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            this._canvasTarget.showTxtAct(sf, node_act);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取胡牌类型的图片\r\n     * \r\n     * @returns \r\n     * @param {SeatVo} seatInfo 座位信息\r\n     * @memberof MJ_Play\r\n     */\r\n    getHuPaiSF(seatInfo: SeatVo): cc.SpriteFrame {\r\n        //'0=自摸\\n 1=胡\\n 2=天胡\\n 3=地胡\\n 4=杠上花\\n 5=杠上炮\\n 6=碰\\n 7=杠\\n 8=抢杠\\n 9=点炮\\n 10=一炮多响\\n 11=海底捞月\\n 12=呼叫转移\\n''13=流局\\n 14=游戏结束\\n'\r\n        //胡牌方式(0=未胡牌,1=自摸 ,2=点炮,3=抢杠胡,4=自摸杠上花,5=点杠上花胡,6=点杠上炮,7=查叫) \r\n        let huPaiSF = null;\r\n        if (dd.gm_manager.mjGameData.breakSeats.length > 1) {\r\n            huPaiSF = huPaiSF = this._canvasTarget.mj_text_list[10];\r\n        } else {\r\n            switch (seatInfo.huPaiType) {\r\n                case 0:\r\n                    huPaiSF = null;\r\n                    break;\r\n                case 1:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[0];\r\n                    break;\r\n                case 2:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[9];\r\n                    break;\r\n                case 3:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[8];\r\n                    break;\r\n                case 4:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[4];\r\n                    break;\r\n                case 5:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[4];\r\n                    break;\r\n                case 6:\r\n                    huPaiSF = this._canvasTarget.mj_text_list[5];\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        return huPaiSF;\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n"]}