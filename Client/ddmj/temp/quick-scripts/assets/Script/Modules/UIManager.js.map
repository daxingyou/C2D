{"version":3,"sources":["UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\assets\\Script\\Modules","sourcesContent":["import Alert from '../UI/Alert';\r\nimport Loading from '../UI/Loading';\r\nimport Tip from '../UI/Tip';\r\n/**\r\n * 管理公共UI的类\r\n * \r\n * @export\r\n * @class UIManager\r\n */\r\nexport default class UIManager {\r\n    private static _instance: UIManager = null;\r\n    private constructor() { }\r\n    /**\r\n     * 获取WSManager单例对象\r\n     * \r\n     * @static\r\n     * @returns {UIManager} \r\n     * @memberof UIManager\r\n     */\r\n    static getInstance(): UIManager {\r\n        if (UIManager._instance === null) {\r\n            UIManager._instance = new UIManager();\r\n        }\r\n        return UIManager._instance;\r\n    }\r\n    /**\r\n     * loading框预制\r\n     * \r\n     * @private\r\n     * @type {cc.Prefab}\r\n     * @memberof UIManager\r\n     */\r\n    private p_loading: cc.Prefab = null;\r\n    /**\r\n     * Loading框是否显示\r\n     */\r\n    private isShowLoading: boolean = false;\r\n    /**\r\n     * 警示框预制\r\n     * \r\n     * @private\r\n     * @type {cc.Prefab}\r\n     * @memberof UIManager\r\n     */\r\n    private p_alert: cc.Prefab = null;\r\n    /**\r\n     * 漂浮框预制\r\n     * \r\n     * @private\r\n     * @type {cc.Prefab}\r\n     * @memberof UIManager\r\n     */\r\n    private p_tip: cc.Prefab = null;\r\n    /**\r\n     * 是否可以显示弹出框 true = 显示  false = 不显示\r\n     * \r\n     * @type {boolean}\r\n     * @memberof UIManager\r\n     */\r\n    public isShowPopup: boolean = true;\r\n    /**\r\n     * 场景切换前的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_before_scene_loading: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        this.isShowLoading = false;\r\n        this.isShowPopup = true;\r\n    }\r\n    /**\r\n     * 游戏每帧刷新前的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_befor_update: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n\r\n    }\r\n    /**\r\n     * app切换到后台的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_app_hide: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        if (!cc.game.isPaused()) {\r\n            cc.game.pause();\r\n        }\r\n    }\r\n    /**\r\n     * app切换到前台的回调\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    private cb_app_show: (event: cc.Event.EventCustom) => void = (event: cc.Event.EventCustom) => {\r\n        if (cc.game.isPaused()) {\r\n            cc.game.resume();\r\n        }\r\n    }\r\n    /**\r\n     * 初始化\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    async initUI(): Promise<void> {\r\n        //注册全局事件\r\n        cc.director.on(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.cb_before_scene_loading, this);\r\n        cc.director.on(cc.Director.EVENT_BEFORE_UPDATE, this.cb_befor_update, this);\r\n        cc.game.on(cc.game.EVENT_HIDE, this.cb_app_hide, this);\r\n        cc.game.on(cc.game.EVENT_SHOW, this.cb_app_show, this);\r\n\r\n        await this.initLoading();\r\n        await this.initAlert();\r\n        await this.initTip();\r\n    }\r\n    /**\r\n     * 加载Loading预制\r\n     * \r\n     * @returns {Promise<void>} \r\n     * @memberof UIManager\r\n     */\r\n    initLoading(): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            cc.loader.loadRes(\r\n                \"Prefab/Loading\",\r\n                cc.Prefab,\r\n                (err, prefab) => {\r\n                    if (err) {\r\n                        reject(err.message);\r\n                        return;\r\n                    }\r\n                    this.p_loading = prefab;\r\n                    resolve();\r\n                });\r\n        });\r\n    }\r\n    /**\r\n     * 加载Alert预制\r\n     * \r\n     * @returns {Promise<void>} \r\n     * @memberof UIManager\r\n     */\r\n    initAlert(): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            cc.loader.loadRes(\r\n                \"Prefab/Alert\",\r\n                cc.Prefab,\r\n                (err, prefab) => {\r\n                    if (err) {\r\n                        reject(err.message);\r\n                        return;\r\n                    }\r\n                    this.p_alert = prefab;\r\n                    resolve();\r\n                });\r\n        });\r\n    }\r\n    /**\r\n     * 加载Tip预制\r\n     * \r\n     * @returns {Promise<void>} \r\n     * @memberof UIManager\r\n     */\r\n    initTip(): Promise<void> {\r\n        return new Promise<void>((resolve, reject) => {\r\n            cc.loader.loadRes(\r\n                \"Prefab/Tip\",\r\n                cc.Prefab,\r\n                (err, prefab) => {\r\n                    if (err) {\r\n                        reject(err.message);\r\n                        return;\r\n                    }\r\n                    this.p_tip = prefab;\r\n                    resolve();\r\n                });\r\n        });\r\n    }\r\n    /**\r\n     * 获取当前显示的Canvas节点\r\n     * \r\n     * @returns {cc.Node} \r\n     * @memberof UIManager\r\n     */\r\n    getCanvasNode(): cc.Node {\r\n        return cc.director.getScene().getChildByName('Canvas');\r\n    }\r\n    /**\r\n     * 获取当前场景下的RootNode节点\r\n     * \r\n     * @returns {cc.Node} \r\n     * @memberof UIManager\r\n     */\r\n    getRootNode(): cc.Node {\r\n        return cc.find('RootNode', this.getCanvasNode());\r\n    }\r\n    /**\r\n     * 显示Loading框\r\n     * \r\n     * @param {string} [msg] 提示信息内容\r\n     * @return {boolean} 是否显示成功\r\n     * @memberof UIManager\r\n     */\r\n    showLoading(msg: string = '正在加载，请稍后'): boolean {\r\n        if (this.isShowLoading) return false;\r\n        this.isShowLoading = true;\r\n        let node = cc.instantiate(this.p_loading);\r\n        node.zIndex = 99;\r\n        node.parent = this.getCanvasNode();\r\n        let loading: Loading = node.getComponent('Loading') as Loading;\r\n        loading.setMsg(msg);\r\n        return true;\r\n    }\r\n    /**\r\n     * 隐藏Loading框\r\n     * \r\n     * @memberof UIManager\r\n     */\r\n    hideLoading() {\r\n        if (this.isShowLoading) {\r\n            this.isShowLoading = false;\r\n            let node = cc.find('Loading', this.getCanvasNode());\r\n            if (node && node.isValid) {\r\n                node.removeFromParent(true);\r\n                node.destroy();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 显示警示框\r\n     * \r\n     * @param {string} msg 具体信息内容\r\n     * @param {string} title 标题\r\n     * @param {btn_obj} [obj_yes] 点击同意按钮事件回调\r\n     * @param {btn_obj} [obj_no] 点击拒绝按钮事件回调\r\n     * @param {number} [ha=0] 文字对齐方式 0=左对齐 1=居中 2=右对齐\r\n     * @memberof UIManager\r\n     */\r\n    showAlert(msg: string, title: string, obj_yes?: btn_obj, obj_no?: btn_obj, ha: number = 1) {\r\n        this.hideLoading();\r\n        let node = cc.find('Alert', this.getCanvasNode());\r\n        if (node && node.isValid) {\r\n            node.removeFromParent(true);\r\n            node.destroy();\r\n        }\r\n        node = cc.instantiate(this.p_alert);\r\n        node.parent = this.getCanvasNode();\r\n        let alert: Alert = node.getComponent('Alert') as Alert;\r\n        alert.showAlert(msg, title, obj_yes, obj_no, ha);\r\n    }\r\n    /**\r\n     * 显示漂浮框\r\n     * \r\n     * @param {string} msg 提示信息内容\r\n     * @param {number} [sTime=1] 前段动画时间 \r\n     * @param {number} [mTime=2] 悬浮时间\r\n     * @param {number} [eTime=1] 后端动画时间\r\n     * @memberof UIManager\r\n     */\r\n    showTip(msg: string, sTime: number = 1, mTime: number = 2, eTime: number = 1) {\r\n        let node = cc.instantiate(this.p_tip);\r\n        node.zIndex = 99;\r\n        node.parent = this.getCanvasNode();\r\n        let tip: Tip = node.getComponent('Tip') as Tip;\r\n        tip.showTip(msg, sTime, mTime, eTime);\r\n    }\r\n    /**\r\n     * 清理销毁\r\n     * \r\n     * @memberof WSManager\r\n     */\r\n    destroySelf(): void {\r\n        //注销全局事件\r\n        cc.director.off(cc.Director.EVENT_BEFORE_SCENE_LOADING, this.cb_before_scene_loading, this);\r\n        cc.director.off(cc.Director.EVENT_BEFORE_UPDATE, this.cb_befor_update, this);\r\n        cc.game.off(cc.game.EVENT_HIDE, this.cb_app_hide, this);\r\n        cc.game.off(cc.game.EVENT_SHOW, this.cb_app_show, this);\r\n        this.isShowLoading = false;\r\n        //释放loading预制\r\n        this.release(this.p_loading);\r\n        this.release(this.p_alert);\r\n        this.release(this.p_tip);\r\n\r\n\r\n        UIManager._instance = null;\r\n    }\r\n    /**\r\n     * 释放资源及其所有的引用\r\n     * \r\n     * @private\r\n     * @param {(cc.Asset | cc.RawAsset | string)} owner 需要释放的资源\r\n     * @memberof IMGManager\r\n     */\r\n    private release(owner: cc.Asset | cc.RawAsset | string): void {\r\n        let deps = cc.loader.getDependsRecursively(owner);\r\n        cc.loader.release(deps);\r\n    }\r\n    /**\r\n     * 适配iponex的尺寸\r\n     * @param {cc.Node} canvas \r\n     * @memberof UIManager\r\n     */\r\n    fixIPoneX(canvas: cc.Node) {\r\n        if (cc.sys.isNative && cc.sys.platform == cc.sys.IPHONE) {\r\n            var size = cc.view.getFrameSize();\r\n            var isIphoneX = (size.width == 2436 && size.height == 1125)\r\n                || (size.width == 1125 && size.height == 2436);\r\n            if (isIphoneX) {\r\n                var cvs = canvas.getComponent(cc.Canvas);\r\n                cvs.fitHeight = true;\r\n                cvs.fitWidth = true;\r\n            }\r\n        }\r\n    }\r\n}"]}