{"version":3,"sources":["Club_Table_Item.ts.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Club","sourcesContent":["import * as dd from './../../Modules/ModuleManager';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Club_Table_Item extends cc.Component {\r\n\r\n    /**\r\n     * 游戏状态\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof Club_Table_Item\r\n     */\r\n    @property(cc.Sprite)\r\n    img_state: cc.Sprite = null;\r\n    /**\r\n     * 头像\r\n     * @type {[cc.Sprite]}\r\n     * @memberof Club_Table_Item\r\n     */\r\n    @property([cc.Sprite])\r\n    headImg_list: cc.Sprite[] = [];\r\n\r\n    @property(cc.Label)\r\n    lblGameNum: cc.Label = null;\r\n\r\n    _itemData: CorpsTableInner = null;       //俱乐部信息数据\r\n    _cb = null;                             //item点击回调\r\n    _target = null;\r\n\r\n    onLoad() {\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            if (this._cb) {\r\n                this._cb(this._itemData);\r\n            }\r\n            event.stopPropagation();\r\n        }, this);\r\n    }\r\n\r\n    updateItem(data: CorpsTableInner, clubInfo: CorpsVoInner, cb, target) {\r\n        this._itemData = data;\r\n        this._cb = cb;\r\n        this._target = target;\r\n\r\n        this.showInfo();\r\n    }\r\n\r\n    showInfo() {\r\n        let player = 0;\r\n        for (var i = 0; i < this.headImg_list.length; i++) {\r\n            let seatInfo = this._itemData.seats[i];\r\n            if (seatInfo && seatInfo.accountId && seatInfo.accountId !== '' && seatInfo.accountId !== '0') {\r\n                player++;\r\n                this.showHead(i, seatInfo);\r\n            } else {\r\n                this.headImg_list[i].node.active = false;\r\n            }\r\n        }\r\n\r\n        if (player >= this.headImg_list.length) {\r\n            this.lblGameNum.string = '8/10局';\r\n            this.img_state.spriteFrame = this._target.table_state_list[0];\r\n        } else {\r\n            this.lblGameNum.string = '';\r\n            this.img_state.spriteFrame = this._target.table_state_list[1];\r\n        }\r\n    }\r\n\r\n    async showHead(index: number, seatInfo) {\r\n        let headSF = null;\r\n        try {\r\n            headSF = await dd.img_manager.loadURLImage(seatInfo.headImg);\r\n        } catch (error) {\r\n            cc.log('获取头像错误');\r\n        }\r\n        if (this.headImg_list[index]) {\r\n            this.headImg_list[index].node.active = true;\r\n            this.headImg_list[index].spriteFrame = headSF;\r\n        }\r\n    }\r\n}\r\n"]}