{"version":3,"sources":["Club_Record_Item.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Club","sourcesContent":["import * as dd from './../../Modules/ModuleManager';\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Club_Record_Item extends cc.Component {\r\n\r\n    /**\r\n     *索引\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblIndex: cc.Label = null;\r\n\r\n    /**\r\n     * 房间id\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblRoomId: cc.Label = null;\r\n\r\n    /**\r\n     * 对战时间\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property(cc.Label)\r\n    lblGameTime: cc.Label = null;\r\n\r\n    /**\r\n     * 删除按钮\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property(cc.Node)\r\n    node_delete: cc.Node = null;\r\n    /**\r\n     * 大赢家\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property([cc.Node])\r\n    node_win_list: cc.Node[] = [];\r\n\r\n    /**\r\n     * 名字\r\n     * \r\n     * @type {cc.Label[]}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property([cc.Label])\r\n    lblNameList: cc.Label[] = [];\r\n\r\n    /**\r\n     * 分数\r\n     * \r\n     * @type {cc.Label[]}\r\n     * @memberof Club_Record_Item\r\n     */\r\n    @property([cc.Label])\r\n    lblScoreList: cc.Label[] = [];\r\n\r\n    _itemData: RecordItemVo = null;                            //俱乐部信息数据\r\n    _cb = null;             //item点击回调\r\n    _target = null;\r\n    onLoad() {\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            if (this._cb) {\r\n                this._cb(this._itemData);\r\n            }\r\n            event.stopPropagation();\r\n        }, this);\r\n    }\r\n\r\n    updateItem(index: number, data: RecordItemVo, createPlayer: string, cb, target) {\r\n        this._itemData = data;\r\n        this._cb = cb;\r\n        this._target = target;\r\n\r\n        this.lblIndex.string = index + '';\r\n        this.lblGameTime.string = '对战时间:  ' + dd.utils.getDateStringByTimestamp(data.recordTime, 3);\r\n        this.lblRoomId.string = '房间号:' + data.tableId;\r\n\r\n        let mIndex = 0;\r\n        let maxScore = data.seats[0].score;\r\n        for (var i = 0; i < this.lblNameList.length; i++) {\r\n            this.node_win_list[i].active = false;\r\n            this.lblScoreList[i].node.color = cc.Color.WHITE;\r\n            if (data.seats[i]) {\r\n                this.lblNameList[i].node.active = true;\r\n                this.lblNameList[i].string = data.seats[i].nick;\r\n                this.lblScoreList[i].string = data.seats[i].score + '';\r\n                if (data.seats[i].score > maxScore) {\r\n                    maxScore = data.seats[i].score;\r\n                    mIndex = i;\r\n                }\r\n                //如果是自己的昵称\r\n                if (data.seats[i].nick === dd.ud_manager.mineData.nick) {\r\n                    this.lblScoreList[i].node.color = cc.color(77, 203, 235);\r\n                }\r\n            } else {\r\n                this.lblNameList[i].node.active = false;\r\n            }\r\n        }\r\n        if (this.node_win_list[mIndex]) {\r\n            this.node_win_list[mIndex].active = true;\r\n            this.lblScoreList[mIndex].node.color = cc.color(245, 152, 92);\r\n        }\r\n        if (this.node_delete) {\r\n            //如果创建人是自己\r\n            if (createPlayer === dd.ud_manager.mineData.accountId) {\r\n                this.node_delete.active = true;\r\n            } else {\r\n                this.node_delete.active = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 删除按钮\r\n     * \r\n     * @memberof Club_Member_Item\r\n     */\r\n    click_btn_delete() {\r\n        dd.mp_manager.playButton();\r\n        dd.ui_manager.showAlert('确定删除当前战绩？'\r\n            , '战绩删除',\r\n            {\r\n                lbl_name: '确定',\r\n                callback: () => {\r\n                    this._target.sendDeleteRecord(this._itemData.tableId);\r\n                }\r\n            },\r\n            {\r\n                lbl_name: '再想想',\r\n                callback: () => {\r\n                }\r\n            }\r\n            , 1);\r\n    }\r\n}\r\n"]}