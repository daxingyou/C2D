{"version":3,"sources":["Room_Join_Normal.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Room","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class Room_Join_Normal extends cc.Component {\r\n\r\n    /**\r\n     * 显示房间号Id的数字列表\r\n     * \r\n     * @type {cc.Label[]}\r\n     * @memberof Room_Join_Normal\r\n     */\r\n    @property([cc.Label])\r\n    lblInputList: cc.Label[] = [];\r\n\r\n    /**\r\n     * 当前输入的数字索引\r\n     * \r\n     * @type {number}\r\n     * @memberof Room_Join_Normal\r\n     */\r\n    _curIndex: number = 0;\r\n    onLoad() {\r\n        this.node.on(\"touchend\", (event: cc.Event.EventTouch) => {\r\n            dd.ui_manager.isShowPopup = true;\r\n            this.node.removeFromParent(true);\r\n            this.node.destroy();\r\n            event.stopPropagation();\r\n        }, this);\r\n        this.init();\r\n        dd.ui_manager.hideLoading();\r\n    }\r\n\r\n    /**\r\n     * 初始化数据\r\n     * \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    init(): void {\r\n        this._curIndex = 0;\r\n        for (var i = 0; i < this.lblInputList.length; i++) {\r\n            this.lblInputList[i].string = '';\r\n        }\r\n    }\r\n\r\n\r\n    /**\r\n     * 发送加入房间的数据\r\n     * \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    sendJoinRoom() {\r\n        let tableId = '';\r\n        for (var i = 0; i < this.lblInputList.length; i++) {\r\n            tableId += this.lblInputList[i].string;\r\n        }\r\n        if (dd.ui_manager.showLoading()) {\r\n            let obj = { 'tableId': Number(tableId) };\r\n            let msg = JSON.stringify(obj);\r\n            dd.ws_manager.sendMsg(dd.protocol.MAJIANG_ROOM_JOIN, msg, (flag: number, content?: any) => {\r\n                if (flag === 0) {//成功\r\n                    dd.gm_manager.mjGameData = content as MJGameData;\r\n                    dd.gm_manager.replayMJ = 0;\r\n                    cc.director.loadScene('MJScene');\r\n                } else if (flag === -1) {//超时\r\n                } else {//失败,content是一个字符串\r\n                    dd.ui_manager.showAlert(content, '温馨提示');\r\n                    dd.ui_manager.hideLoading();\r\n                }\r\n                cc.log(content);\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 输入数字的点击事件\r\n     * \r\n     * @param {cc.Event.EventTouch} event \r\n     * @param {string} num \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    click_btn_input(event: cc.Event.EventTouch, num: string): void {\r\n        dd.mp_manager.playButton();\r\n        switch (num) {\r\n            case '10'://重输\r\n                this.init();\r\n                break;\r\n            case '11'://删除\r\n                this.deleteLastInput();\r\n                break;\r\n            default:\r\n                this.showInputNum(num);\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     *删除上一个输入的数字 \r\n     * \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    deleteLastInput(): void {\r\n        if (this._curIndex <= 0) return;\r\n        this.lblInputList[this._curIndex - 1].string = '';\r\n        if (this._curIndex > 0)\r\n            this._curIndex--;\r\n    }\r\n\r\n    /**\r\n     * 显示当前输入的数字\r\n     * \r\n     * @param {string} num \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    showInputNum(num: string): void {\r\n        if (this._curIndex < this.lblInputList.length) {\r\n            this.lblInputList[this._curIndex].string = num;\r\n            if (this._curIndex < this.lblInputList.length) {\r\n                this._curIndex++;\r\n                if (this._curIndex === this.lblInputList.length) {\r\n                    cc.log('输入完毕');\r\n                    this.sendJoinRoom();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 退出加入房间界面\r\n     * \r\n     * @memberof Room_Join_Normal\r\n     */\r\n    click_btn_out() {\r\n        dd.mp_manager.playButton();\r\n        dd.ui_manager.isShowPopup = true;\r\n        this.node.removeFromParent(true);\r\n        this.node.destroy();\r\n    }\r\n}\r\n"]}