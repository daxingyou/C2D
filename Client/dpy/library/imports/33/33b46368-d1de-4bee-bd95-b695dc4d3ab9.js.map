{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game/assets\\Script\\SceneScript\\Game\\BuyLayer.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Game","sourcesContent":["\r\nconst { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class BuyLayer extends cc.Component {\r\n    /**\r\n     * 最小带入\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof BuyLayer\r\n     */\r\n    @property(cc.Label)\r\n    lab_min: cc.Label = null;\r\n    /**\r\n     * 最大购入\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof BuyLayer\r\n     */\r\n    @property(cc.Label)\r\n    lab_max: cc.Label = null;\r\n    /**\r\n     * 显示当前选择的购买量\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof BuyLayer\r\n     */\r\n    @property(cc.Label)\r\n    lab_buy: cc.Label = null;\r\n    /**\r\n     * 加减购买量用的数组下标\r\n     * \r\n     * @type {number}\r\n     * @memberof BuyLayer\r\n     */\r\n    maxIndex: number = 0;\r\n    /**\r\n     * 记录桌子上的最小带入\r\n     * \r\n     * @type {number}\r\n     * @memberof BuyLayer\r\n     */\r\n    min: number = 0;\r\n\r\n    onLoad() {\r\n        let tableData = dd.gm_manager.getTableData();\r\n        this.min = tableData.joinChip;\r\n        this.maxIndex = Math.floor(tableData.buyMaxChip / tableData.joinChip);\r\n        this.lab_min.string = tableData.joinChip.toString();\r\n        this.lab_max.string = tableData.buyMaxChip.toString();\r\n        this.lab_buy.string = this.lab_min.string;\r\n        this.lab_buy.node.tag = 0;\r\n    }\r\n    /**\r\n     * 点击面板\r\n     * \r\n     * @memberof BuyLayer\r\n     */\r\n    click_board() {\r\n        dd.mp_manager.playButton();\r\n        this.node.destroy();\r\n    }\r\n    /**\r\n     * 点击加号\r\n     * \r\n     * @memberof BuyLayer\r\n     */\r\n    click_add() {\r\n        dd.mp_manager.playButton();\r\n        let index = this.lab_buy.node.tag;\r\n        if (index < this.maxIndex - 1) {\r\n            index++;\r\n            this.lab_buy.string = (this.min * (index + 1)).toString();\r\n            this.lab_buy.node.tag = index;\r\n        }\r\n    }\r\n    /**\r\n     * 点击减号\r\n     * \r\n     * @memberof BuyLayer\r\n     */\r\n    click_reduce() {\r\n        dd.mp_manager.playButton();\r\n        let index = this.lab_buy.node.tag;\r\n        if (index > 0) {\r\n            index--;\r\n            this.lab_buy.string = (this.min * (index + 1)).toString();\r\n            this.lab_buy.node.tag = index;\r\n        }\r\n    }\r\n    /**\r\n     * 点击发送申请\r\n     * \r\n     * @memberof BuyLayer\r\n     */\r\n    click_send() {\r\n        dd.ui_manager.showLoading('正在发送购买申请');\r\n        dd.mp_manager.playButton();\r\n        let obj = {\r\n            tableId: dd.gm_manager.getTableData().tableId,\r\n            chipNum: Number(this.lab_buy.string)\r\n        }\r\n        let msg = JSON.stringify(obj);\r\n        dd.ws_manager.sendMsg(dd.protocol.DZPKER_BUY_CHIP, msg, (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                if (dd.gm_manager.getTableData().createPlayer === dd.ud_manager.account_mine.accountId) {\r\n                    dd.ui_manager.hideLoading();\r\n                } else {\r\n                    dd.ui_manager.showTip('申购消息已经发送给房主,请等候房主处理!');\r\n                }\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('申购消息发送超时!');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n            this.node.destroy();\r\n        });\r\n    }\r\n}\r\n"]}