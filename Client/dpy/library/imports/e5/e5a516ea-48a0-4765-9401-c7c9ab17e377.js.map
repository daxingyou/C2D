{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home/assets\\Script\\SceneScript\\Home\\Notice.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class Notice extends cc.Component {\r\n    /**\r\n     * 存放公告的一级容器\r\n     * \r\n     * @type {cc.ScrollView}\r\n     * @memberof Notice\r\n     */\r\n    @property(cc.ScrollView)\r\n    sv1: cc.ScrollView = null;\r\n    /**\r\n     * 公告展示的容器\r\n     * \r\n     * @type {cc.ScrollView}\r\n     * @memberof Notice\r\n     */\r\n    @property(cc.ScrollView)\r\n    sv2: cc.ScrollView = null;\r\n    /**\r\n     * 公告数据集\r\n     * \r\n     * @type {ActivityItemAttrib[]}\r\n     * @memberof Notice\r\n     */\r\n    dataList: ActivityItemAttrib[] = null;\r\n\r\n\r\n    init(datas: ActivityItemAttrib[]) {\r\n        this.dataList = datas;\r\n    }\r\n\r\n    onLoad() {\r\n        this.sv1.node.active = true;\r\n        this.sv2.node.active = false;\r\n        if (this.dataList && this.dataList.length > 0) {\r\n            this.dataList.forEach(async (data: ActivityItemAttrib, index: number) => {\r\n                let sf1 = await dd.img_manager.loadURLImage(data.currUrl);\r\n                let node_out = new cc.Node();\r\n                node_out.tag = index;\r\n                node_out.addComponent(cc.Sprite).spriteFrame = sf1;\r\n                node_out.on(cc.Node.EventType.TOUCH_END, async (event: cc.Event.EventTouch) => {\r\n                    dd.mp_manager.playButton();\r\n                    let traget = event.getCurrentTarget();\r\n                    let item = this.dataList[traget.tag];\r\n                    let sf2 = await dd.img_manager.loadURLImage(item.openUrl);\r\n                    let node_in = new cc.Node();\r\n                    node_in.addComponent(cc.Sprite).spriteFrame = sf2;\r\n                    this.sv1.node.active = false;\r\n                    this.sv2.node.active = true;\r\n                    this.sv2.content.addChild(node_in);\r\n                }, this);\r\n                this.sv1.content.addChild(node_out);\r\n            }, this);\r\n            dd.ui_manager.hideLoading();\r\n        } else {\r\n            dd.ui_manager.showTip('当前没有公告消息');\r\n        }\r\n    }\r\n    /**\r\n     * 点击关闭按钮\r\n     * \r\n     * @memberof Notice\r\n     */\r\n    click_out() {\r\n        dd.mp_manager.playButton();\r\n        if (this.sv2.node.active) {\r\n            this.sv2.scrollToTop();\r\n            this.sv2.content.removeAllChildren();\r\n            this.sv2.node.active = false;\r\n            this.sv1.node.active = true;\r\n        } else {\r\n            this.node.destroy();\r\n        }\r\n    }\r\n}\r\n"]}