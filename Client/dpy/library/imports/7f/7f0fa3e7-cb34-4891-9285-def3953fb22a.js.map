{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home/assets\\Script\\SceneScript\\Home\\HomeCanvas.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class HomeCanvas extends cc.Component {\r\n    /**\r\n     * 头像\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Sprite)\r\n    spr_head: cc.Sprite = null;\r\n    /**\r\n     * 用户昵称\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Label)\r\n    lab_name: cc.Label = null;\r\n    /**\r\n     * 玩家id\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Label)\r\n    lab_id: cc.Label = null;\r\n    /**\r\n     * 设置界面\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    pre_setting: cc.Prefab = null;\r\n    /**\r\n     * 创建界面\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n    */\r\n    @property(cc.Prefab)\r\n    pre_create: cc.Prefab = null;\r\n    /**\r\n     * 加入房间\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    pre_join: cc.Prefab = null;\r\n    /**\r\n     * 我的牌局\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    pre_mine: cc.Prefab = null;\r\n    /**\r\n     * 公告\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    pre_notice: cc.Prefab = null;\r\n    /**\r\n     * 生涯\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof HomeCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    pre_career: cc.Prefab = null;\r\n\r\n    onLoad() {\r\n        cc.log(dd.ud_manager.account_mine);\r\n    }\r\n\r\n    async update(dt: number) {\r\n        if (dd.ud_manager && dd.ud_manager.account_mine) {\r\n            if (dd.ud_manager.account_mine.roleAttribVo) {\r\n                this.lab_name.string = dd.utils.getStringBySize(dd.ud_manager.account_mine.roleAttribVo.nick, 12);\r\n                this.lab_id.string = dd.ud_manager.account_mine.roleAttribVo.starNO;\r\n                try {\r\n                    this.spr_head.spriteFrame = await dd.img_manager.loadURLImage(dd.ud_manager.account_mine.roleAttribVo.headImg);\r\n                } catch (error) {\r\n                    cc.log('获取头像错误');\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 点击设置按钮\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_setting() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let setNode = cc.instantiate(this.pre_setting);\r\n        setNode.parent = dd.ui_manager.getRootNode();\r\n    }\r\n    /**\r\n     * 点击公告按钮\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_notice() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let noticeNode = cc.instantiate(this.pre_notice);\r\n        dd.ws_manager.sendMsg(dd.protocol.ACTIVITY_GET_ACTIVITY_LIST, '', (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                let datas: ActivityItemAttrib[] = content.items as ActivityItemAttrib[];\r\n                noticeNode.getComponent('Notice').init(datas);\r\n                noticeNode.parent = dd.ui_manager.getRootNode();\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('获取房间配置消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 点击生涯按钮\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_career() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let careerNode = cc.instantiate(this.pre_career);\r\n        dd.ws_manager.sendMsg(dd.protocol.DZPKER_TABLE_GET_CAREE_INFO, '', (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                let data: CareerData = content as CareerData;\r\n                careerNode.getComponent('Career').init(data);\r\n                careerNode.parent = dd.ui_manager.getRootNode();\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('获取房间配置消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 点击商店按钮\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_store() {\r\n\r\n    }\r\n    /**\r\n     * 点击创建房间\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_create() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let createNode = cc.instantiate(this.pre_create);\r\n        dd.ws_manager.sendMsg(dd.protocol.DZPKER_TABLE_GET_CFG, '', (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                let cfg: CreateCfg = content as CreateCfg;\r\n                createNode.getComponent('Create').init(cfg);\r\n                createNode.parent = dd.ui_manager.getRootNode();\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('获取房间配置消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 点击加入房间\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_join() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let joinNode = cc.instantiate(this.pre_join);\r\n        joinNode.parent = dd.ui_manager.getRootNode();\r\n    }\r\n    /**\r\n     * 点击我的房间\r\n     * \r\n     * @memberof HomeCanvas\r\n     */\r\n    click_mine() {\r\n        dd.ui_manager.showLoading();\r\n        dd.mp_manager.playButton();\r\n        let mineNode = cc.instantiate(this.pre_mine);\r\n        dd.ws_manager.sendMsg(dd.protocol.DZPKER_GET_FIGHTED_TABLE_LIST, '', (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                let datas: JoinedTableItem[] = content.items as JoinedTableItem[];\r\n                mineNode.getComponent('Mine').init(datas);\r\n                mineNode.parent = dd.ui_manager.getRootNode();\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('获取我的牌局消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n}\r\n"]}