{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home/assets\\Script\\SceneScript\\Home\\Career.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\Home","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class Career extends cc.Component {\r\n    /**\r\n     * 进度条数组\r\n     * \r\n     * @type {cc.Sprite[]}\r\n     * @memberof Career\r\n     */\r\n    @property([cc.Sprite])\r\n    proList: cc.Sprite[] = [];\r\n    /**\r\n     * 指针数组\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof Career\r\n     */\r\n    @property([cc.Node])\r\n    pointList: cc.Node[] = [];\r\n    /**\r\n     * 百分比数组\r\n     * \r\n     * @type {cc.Label[]}\r\n     * @memberof Career\r\n     */\r\n    @property([cc.Label])\r\n    perList: cc.Label[] = [];\r\n    /**\r\n     * 战绩统计\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Career\r\n     */\r\n    @property(cc.Node)\r\n    layer1: cc.Node = null;\r\n    /**\r\n     * 历史记录\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof Career\r\n     */\r\n    @property(cc.Node)\r\n    layer2: cc.Node = null;\r\n    /**\r\n     * 房间明细界面\r\n     * @type {cc.Node}\r\n     * @memberof Career\r\n     */\r\n    @property(cc.Node)\r\n    detailLayer: cc.Node = null;\r\n    /**\r\n     * 房间明细的列表\r\n     * @type {cc.Node}\r\n     * @memberof Career\r\n     */\r\n    @property(cc.Node)\r\n    svNode_detail: cc.Node = null;\r\n    /**\r\n     * 生涯数据\r\n     * \r\n     * @type {CareerData}\r\n     * @memberof Career\r\n     */\r\n    data: CareerData = null;\r\n\r\n    init(data: CareerData) {\r\n        this.data = data;\r\n    }\r\n\r\n    onLoad() {\r\n        this.layer1.active = true;\r\n        this.layer2.active = false;\r\n        this.detailLayer.active = false;\r\n        let nums = [\r\n            Number(this.data.winRate),\r\n            Number(this.data.seatDown),\r\n            Number(this.data.showCard),\r\n            Number(this.data.addChip),\r\n            Number(this.data.dropCards),\r\n            Number(this.data.fullBet)\r\n        ];\r\n        nums.forEach((num: number, index: number) => {\r\n            this.proList[index].fillRange = -(num / 2);\r\n            this.pointList[index].rotation = -74 + num * 148;\r\n            this.perList[index].string = Math.round(num * 100) + '%';\r\n        }, this);\r\n        dd.ui_manager.hideLoading();\r\n    }\r\n    /**\r\n     * 点击退出\r\n     * \r\n     * @memberof Career\r\n     */\r\n    click_out() {\r\n        dd.mp_manager.playButton();\r\n        this.node.destroy();\r\n    }\r\n    /**\r\n     * 点击下方按钮切换展示界面\r\n     * \r\n     * @param {cc.Event.EventCustom} event \r\n     * @param {*} [data] \r\n     * @memberof Career\r\n     */\r\n    click_toggle(event: cc.Event.EventCustom, data?: any) {\r\n        dd.mp_manager.playButton();\r\n        if (Number(data) === 1) {\r\n            let sv = this.layer2.getComponent(cc.ScrollView);\r\n            sv.scrollToTop();\r\n            sv.content.destroyAllChildren();\r\n            this.layer2.active = false;\r\n            this.layer1.active = true;\r\n            this.detailLayer.active = false;\r\n        } else {\r\n            this.layer1.active = false;\r\n            this.layer2.active = true;\r\n            this.detailLayer.active = false;\r\n            if (this.data.historyList && this.data.historyList.length > 0) {\r\n                this.layer2.getComponent('SVScript').init(this.data.historyList, (data: CareerHistory) => {\r\n                    this.getRoomDetailInfo(data.recordId);\r\n                });\r\n            } else {\r\n                dd.ui_manager.showTip('您当前没有历史记录!');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 获取房间明细\r\n     * @param {string} recordId \r\n     * @memberof Career\r\n     */\r\n    getRoomDetailInfo(recordId: string) {\r\n        let obj = {\r\n            recordId: recordId,\r\n        };\r\n        let msg = JSON.stringify(obj);\r\n        dd.ws_manager.sendMsg(dd.protocol.DZPKER_TABLE_GET_ALL_WIN_SCORE_INFO, msg, (flag: number, content?: any) => {\r\n            if (flag === 0) {\r\n                let data: AllUser = content;\r\n                if (data.items && data.items.length > 0) {\r\n                    this.detailLayer.active = true;\r\n                    let detailList = [];\r\n                    data.items.forEach((item: TablePlayerListItem, index: number) => {\r\n                        let obj = {\r\n                            index: index,\r\n                            item: item\r\n                        };\r\n                        detailList.push(obj);\r\n                    }, this);\r\n                    this.svNode_detail.getComponent(cc.ScrollView).content.removeAllChildren();\r\n                    this.svNode_detail.getComponent('SVScript').init(detailList);\r\n                }\r\n            } else if (flag === -1) {\r\n                dd.ui_manager.showTip('获取房间明细消息发送超时');\r\n            } else {\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 退出房间明细\r\n     * @memberof Career\r\n     */\r\n    click_btn_outDetail() {\r\n        dd.mp_manager.playButton();\r\n        this.detailLayer.active = false;\r\n    }\r\n}\r\n"]}