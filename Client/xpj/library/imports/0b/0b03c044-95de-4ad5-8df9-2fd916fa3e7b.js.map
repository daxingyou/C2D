{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\NN/assets\\Script\\SceneScript\\NN\\NNRoomCanvas.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\NN","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\n\r\n@ccclass\r\nexport default class NNRoomCanvas extends cc.Component {\r\n    /**\r\n     * 玩家名称\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof \r\n     */\r\n    @property(cc.Label)\r\n    lblName: cc.Label = null;\r\n    /**\r\n     * 玩家金币\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof \r\n     */\r\n    @property(cc.Label)\r\n    lblGold: cc.Label = null;\r\n    /**\r\n     * 玩家ID\r\n     * \r\n     * @type {cc.Label}\r\n     * @memberof \r\n     */\r\n    @property(cc.Label)\r\n    lblStarNo: cc.Label = null;\r\n    /**\r\n     * 玩家头像\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof \r\n     */\r\n    @property(cc.Sprite)\r\n    headImg: cc.Sprite = null;\r\n    /**\r\n     * 房间类型\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property([cc.Node])\r\n    typeNodes: cc.Node[] = [];\r\n    /**\r\n     * 房间等级\r\n     * \r\n     * @type {cc.Sprite}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property(cc.Sprite)\r\n    roomTitle: cc.Sprite = null;\r\n    /**\r\n     * 房间等级图集\r\n     * \r\n     * @type {cc.SpriteFrame[]}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property([cc.SpriteFrame])\r\n    roomSpriteFrame: cc.SpriteFrame[] = [];\r\n    /**\r\n     * 桌子图片(空,1,2)\r\n     * \r\n     * @type {cc.SpriteFrame[]}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property([cc.SpriteFrame])\r\n    tableSpriteFrame: cc.SpriteFrame[] = [];\r\n    /**\r\n     * 桌子预制节点\r\n     * \r\n     * @type {cc.Prefab}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property(cc.Prefab)\r\n    tablePrefab: cc.Prefab = null;\r\n    /**\r\n     * 桌子列表层\r\n     * \r\n     * @type {cc.Node}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    @property(cc.Node)\r\n    tableLayer: cc.Node = null;\r\n    /**\r\n     * 是否需要等待,停止响应后续的点击事件\r\n     * \r\n     * @type {boolean}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    needWait: boolean = false;\r\n    /**\r\n     * 当前展示的桌子等级\r\n     * \r\n     * @type {number}\r\n     * @memberof NNRoomCanvas\r\n     */\r\n    showType: number = null;\r\n\r\n    onLoad() {\r\n        this.tableLayer.active = false;\r\n        dd.ui_manager.getRootNode().active = true;\r\n    }\r\n\r\n    init(items: RoomCfgItem[]) {\r\n        for (let i = 0; i < items.length; i++) {\r\n            if (i > this.typeNodes.length - 1) {\r\n                break;\r\n            }\r\n            let node = this.typeNodes[i];\r\n            let item = items[i];\r\n            node.tag = item.cfgId;\r\n            cc.find('layout/limit', node).getComponent(cc.Label).string = item.joinLimit + '';\r\n        }\r\n        for (let i = items.length; i < this.typeNodes.length; i++) {\r\n            this.typeNodes[i].active = false;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 界面刷新\r\n     * \r\n     * @param {number} dt \r\n     * @memberof \r\n     */\r\n    update(dt: number) {\r\n        //刷新玩家信息\r\n        if (dd.ud_manager && dd.ud_manager.mineData) {\r\n            this.lblName.string = dd.ud_manager.mineData.nick;\r\n            this.lblGold.string = dd.utils.getShowNumberString(dd.ud_manager.mineData.roomCard);\r\n            this.lblStarNo.string = '  (ID:' + dd.ud_manager.mineData.starNO + ')';\r\n            this.headImg.spriteFrame = dd.img_manager.getHeadById(Number(dd.ud_manager.mineData.headImg));\r\n        }\r\n    }\r\n    /**\r\n     * 点击房间,进入桌子列表\r\n     * \r\n     * @param {cc.Button} sender \r\n     * @param {string} type \r\n     * @returns \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    clickRoom(event: cc.Event.EventTouch) {\r\n        if (this.needWait) return;\r\n        if (dd.ui_manager.showLoading()) {\r\n            this.needWait = true;\r\n            dd.mp_manager.playButton();\r\n            this.getTables(event.getCurrentTarget().tag);\r\n        }\r\n    }\r\n    /**\r\n     * 根据类型iD获取桌子集合\r\n     * \r\n     * @param {number} cfgId \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    getTables(cfgId: number) {\r\n        let obj = { 'cfgId': cfgId };\r\n        let msg = JSON.stringify(obj);\r\n        dd.ws_manager.sendMsg(dd.protocol.ZJH_GET_TABLE_LIST, msg, (flag: number, content?: any) => {\r\n            this.needWait = false;\r\n            if (flag === 0) {//成功\r\n                this.showType = obj.cfgId;\r\n                this.openTable(content.items as TableCfgItem[]);\r\n            } else if (flag === -1) {//超时\r\n                dd.ui_manager.showTip('获取房间列表失败,请重试!');\r\n            } else {//失败,content是一个字符串\r\n                dd.ui_manager.showTip(content);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * 展现桌子列表\r\n     * \r\n     * @param {TableCfgItem[]} tables \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    openTable(tables: TableCfgItem[]) {\r\n        this.tableLayer.active = true;\r\n        dd.ui_manager.getRootNode().active = false;\r\n        this.roomTitle.spriteFrame = this.roomSpriteFrame[this.showType - 1];\r\n        let content = cc.find('sv', this.tableLayer).getComponent(cc.ScrollView).content;\r\n        content.removeAllChildren();\r\n        tables.sort((a, b) => {\r\n            return a.tableId - b.tableId;\r\n        });\r\n        tables.forEach((table: TableCfgItem, index: number) => {\r\n            let node = cc.instantiate(this.tablePrefab);\r\n            cc.find('img', node).getComponent(cc.Sprite).spriteFrame = this.tableSpriteFrame[table.playerNum];\r\n            cc.find('id', node).getComponent(cc.Label).string = '- ' + (index + 1) + ' -';\r\n            node.tag = table.tableId;\r\n            node.parent = content;\r\n            node.on(cc.Node.EventType.TOUCH_END, this.joinTable, this);\r\n        }, this);\r\n        dd.ui_manager.hideLoading();\r\n    }\r\n    /**\r\n     * 点击桌子响应的方法\r\n     * \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    joinTable = (event: cc.Event.EventTouch) => {\r\n        if (this.needWait) return;\r\n        if (dd.ui_manager.showLoading()) {\r\n            this.needWait = true;\r\n            dd.mp_manager.playButton();\r\n            let obj = { 'tableId': event.getCurrentTarget().tag, 'type': 0 };\r\n            let msg = JSON.stringify(obj);\r\n            dd.ws_manager.sendMsg(dd.protocol.ZJH_JION_TABLEID, msg, (flag: number, content?: any) => {\r\n                this.needWait = false;\r\n                if (flag === 0) {//成功\r\n                    dd.gm_manager.nnGameData = content as GameData;\r\n                    cc.director.loadScene('NNScene');\r\n                } else if (flag === -1) {//超时\r\n                    dd.ui_manager.showTip('加入房间消息超时,请重试!');\r\n                } else {//失败,content是一个字符串\r\n                    dd.ui_manager.showTip(content);\r\n                    this.getTables(this.showType);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    /**\r\n     * 关闭桌子列表\r\n     * \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    closeTable() {\r\n        if (this.needWait) return;\r\n        dd.mp_manager.playButton();\r\n        this.showType = null;\r\n        let sv = cc.find('sv', this.tableLayer).getComponent(cc.ScrollView);\r\n        sv.stopAutoScroll();\r\n        sv.scrollToTop();\r\n        sv.content.removeAllChildren();\r\n        this.tableLayer.active = false;\r\n        dd.ui_manager.getRootNode().active = true;\r\n    }\r\n    /**\r\n     * 点击返回按钮,返回大厅\r\n     * \r\n     * @returns \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    clickBack() {\r\n        if (this.needWait) return;\r\n        if (dd.ui_manager.showLoading()) {\r\n            this.needWait = true;\r\n            dd.mp_manager.playButton();\r\n            cc.director.loadScene('HomeScene');\r\n        }\r\n    }\r\n    /**\r\n     * 快速匹配\r\n     * \r\n     * @returns \r\n     * @memberof NNRoomCanvas\r\n     */\r\n    quickJoin() {\r\n        if (this.needWait || !this.showType) return;\r\n        if (dd.ui_manager.showLoading()) {\r\n            this.needWait = true;\r\n            dd.mp_manager.playButton();\r\n            let obj = { 'cfgId': this.showType };\r\n            let msg = JSON.stringify(obj);\r\n            dd.ws_manager.sendMsg(dd.protocol.ZJH_QUICK_JOIN, msg, (flag: number, content?: any) => {\r\n                this.needWait = false;\r\n                if (flag === 0) {//成功\r\n                    dd.gm_manager.nnGameData = content as GameData;\r\n                    cc.director.loadScene('NNScene');\r\n                } else if (flag === -1) {//超时\r\n                    dd.ui_manager.showTip('快速匹配消息超时,请重试!');\r\n                } else {//失败,content是一个字符串\r\n                    dd.ui_manager.showTip(content);\r\n                    this.getTables(this.showType);\r\n                }\r\n            });\r\n        }\r\n    }\r\n}"]}