{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\ZJH/assets\\Script\\SceneScript\\ZJH\\ZJH_Player.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\ZJH","sourcesContent":["const { ccclass, property } = cc._decorator;\r\nimport * as dd from './../../Modules/ModuleManager';\r\nimport ZJH_PlayerUI from './ZJH_PlayerUI';\r\nimport * as ZJH_Help from './ZJH_Help';\r\n@ccclass\r\nexport default class ZJH_Player extends cc.Component {\r\n    /**\r\n     * 玩家节点坐标\r\n     * \r\n     * @type {cc.Node[]}\r\n     * @memberof ZJH_Player\r\n     */\r\n    @property(cc.Node)\r\n    node_player_list: cc.Node[] = [];\r\n\r\n    _canvansScript = null;\r\n    onLoad() {\r\n        this._canvansScript = dd.ui_manager.getCanvasNode().getComponent('ZJHCanvas');\r\n    }\r\n    /**\r\n     * 重置玩家信息\r\n     * \r\n     * @memberof ZJH_Player\r\n     */\r\n    resetPlayerInfo() {\r\n        for (var i = 0; i < this.node_player_list.length; i++) {\r\n            let player = this.node_player_list[i];\r\n            if (player) {\r\n                let playerUI: ZJH_PlayerUI = player.getComponent('ZJH_PlayerUI');\r\n                playerUI.resetSeat();\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 显示玩家信息\r\n     * @memberof ZJH_Player\r\n     */\r\n    showPlayerInfo() {\r\n        let seats = dd.gm_manager.zjhGameData.seats;\r\n        if (seats && seats.length) {\r\n            for (var i = 0; i < seats.length; i++) {\r\n                let seat = seats[i];\r\n                let player = this.node_player_list[i];\r\n                if (player) {\r\n                    if (seat && seat.accountId !== '' && seat.accountId !== '0') {\r\n                        player.active = true;\r\n                        let playerUI: ZJH_PlayerUI = player.getComponent('ZJH_PlayerUI');\r\n                        playerUI.initData(seat);\r\n                    } else {\r\n                        player.active = false;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取发牌的坐标列表 和 索引列表\r\n     * \r\n     * @memberof NewClass\r\n     */\r\n    getFPPosList() {\r\n        let obj = {\r\n            'posList': [],\r\n            'playerIndexList': []\r\n        };\r\n        for (var i = 0; i < dd.gm_manager.zjhGameData.seats.length; i++) {\r\n            let seat = dd.gm_manager.zjhGameData.seats[i];\r\n            if (seat && seat.accountId !== '' && seat.accountId !== '0'\r\n                && seat.bGamed === 1\r\n                && seat.btState !== ZJH_Help.ZJH_BT_State.ACT_STATE_DROP) {\r\n                let player = this.node_player_list[i];\r\n                if (player) {\r\n                    let playerUI = player.getComponent('ZJH_PlayerUI');\r\n                    let cPos = playerUI.getCardBoardPos();\r\n                    let pos = this.getWorldPos(player, cPos);\r\n                    obj.posList.push(pos);\r\n                    obj.playerIndexList.push(i);\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    /**\r\n     * 根据index来显示玩家的牌信息\r\n     * @param {number} index 座位玩家索引\r\n     * @param {number} pokerId 牌索引\r\n     * @param {number} [type=0] 0=显示牌 1=显示翻牌\r\n     * @param {boolean} [isShow=true] 是否显示牌\r\n     * @memberof ZJH_Player\r\n     */\r\n    showPokerByIndex(index: number, pokerId: number, type: number = 0, isShow: boolean = true) {\r\n        let player = this.node_player_list[index];\r\n        if (player) {\r\n            let playerUI: ZJH_PlayerUI = player.getComponent('ZJH_PlayerUI');\r\n            playerUI.showPokerById(pokerId, type, isShow);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取世界坐标 node:父节点 pos:坐标\r\n     * @param {any} node \r\n     * @param {any} pos \r\n     * @returns \r\n     * @memberof ZJH_Player\r\n     */\r\n    getWorldPos(node, pos) {\r\n        let targetP = node.convertToWorldSpaceAR(pos);\r\n        //依然是以屏幕左下角为起点,所以要减去一半\r\n        targetP.x = targetP.x - this.node.width / 2;\r\n        targetP.y = targetP.y - this.node.height / 2;\r\n        return targetP;\r\n    }\r\n    /**\r\n     * 根据座位索引，获取座位的坐标点\r\n     * \r\n     * @memberof ZJH_Player\r\n     */\r\n    getPosByIndex(index: number) {\r\n        if (index < 0 || index >= this.node_player_list.length) {\r\n            cc.log('索引错误');\r\n            return cc.p(0, 0);\r\n        }\r\n        let player = this.node_player_list[index];\r\n        if (player) {\r\n            return this.getWorldPos(this.node, player.getPosition());\r\n        }\r\n        return cc.p(0, 0);\r\n    }\r\n    /**\r\n     * 显示所有人的牌\r\n     * @memberof ZJH_Player\r\n     */\r\n    showAllFPAction() {\r\n        for (var i = 0; i < dd.gm_manager.zjhGameData.seats.length; i++) {\r\n            let seat = dd.gm_manager.zjhGameData.seats[i];\r\n            if (seat && seat.accountId !== '' && seat.accountId !== '0' && seat.bGamed === 1) {\r\n                this.showFPActionBySeatId(seat.seatIndex);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     *  根据座位id显示翻牌动作\r\n     * @param {number} seatId   //需要计算的座位id\r\n     * @memberof ZJH_Player\r\n     */\r\n    showFPActionBySeatId(seatId: number) {\r\n        let index = ZJH_Help.getIndexBySeatId(seatId);\r\n        let player = this.node_player_list[index];\r\n        if (player) {\r\n            let script = player.getComponent(\"ZJH_PlayerUI\");\r\n            script.showSeatFPAction();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 根据自己的座位，计算seatId在界面上是第几个位置\r\n     * @param {number} mySeatId //自己的座位id\r\n     * @param {number} seatId   //需要计算的座位id\r\n     * @returns \r\n     * @memberof ZJH_Player\r\n     */\r\n    getSeatIndexBySeatId(mySeatId: number, seatId: number) {\r\n        //获取自己的座位信息\r\n        let index = 0;\r\n        if (mySeatId > seatId) {\r\n            index = 5 - (mySeatId - seatId);\r\n        } else {\r\n            index = Math.abs(mySeatId - seatId);\r\n        }\r\n        return index;\r\n    }\r\n\r\n\r\n    /**\r\n     * 显示牌的抖动动作\r\n     */\r\n    showPokerShakeAction() {\r\n        let prevSeat = ZJH_Help.getSeatBySeatId(dd.gm_manager.zjhGameData.prevSeatIndex);\r\n        //如果上一家的表态是全下，那么只能比牌 上一家\r\n        if (prevSeat && prevSeat.btVal === ZJH_Help.ZJH_Act_State.BT_VAL_BETALL) {\r\n            this.showShakeBySeat(prevSeat);\r\n        } else {\r\n            let mySeat = ZJH_Help.getSeatById(dd.ud_manager.mineData.accountId);\r\n            //自己当前 跟注 时，应该下注的金额\r\n            let showMoney = mySeat.looked === 1 ? dd.gm_manager.zjhGameData.lookBetMoney : dd.gm_manager.zjhGameData.unLookBetMoney;\r\n            //如果自己身上的钱不足 应该下注的钱，就只能 比牌下一家         \r\n            if (mySeat.money <= showMoney) {\r\n                let nextSeat = this.getNextBtSeat(dd.gm_manager.zjhGameData.btIndex);\r\n                if (nextSeat) {\r\n                    this.showShakeBySeat(nextSeat);\r\n                }\r\n            } else {\r\n                for (var i = 0; i < dd.gm_manager.zjhGameData.seats.length; i++) {\r\n                    let seat = dd.gm_manager.zjhGameData.seats[i];\r\n                    if (seat && seat.accountId !== '' && seat.accountId !== '0' && seat.bGamed === 1\r\n                        && seat.accountId !== dd.ud_manager.mineData.accountId\r\n                        && seat.btVal !== ZJH_Help.ZJH_Act_State.BT_VAL_DROP\r\n                        && seat.btState !== ZJH_Help.ZJH_BT_State.ACT_STATE_DROP) {\r\n                        this.showShakeBySeat(seat);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 根据seat显示抖牌\r\n     * @param {SeatVo} seat \r\n     * @memberof ZJH_Player\r\n     */\r\n    showShakeBySeat(seat: SeatVo) {\r\n        let index = ZJH_Help.getIndexBySeatId(seat.seatIndex);\r\n        let player = this.node_player_list[index];\r\n        if (player) {\r\n            let playerUI = player.getComponent('ZJH_PlayerUI');\r\n            let cPos = playerUI.getCardBoardPos();\r\n            let pos = this.getWorldPos(player, cPos);\r\n            this._canvansScript.showShakeAction(seat.seatIndex, pos);\r\n        }\r\n    }\r\n    /**\r\n     * 获取下一家表态的人\r\n     * @memberof ZJH_Player\r\n     */\r\n    getNextBtSeat(btIndex: number): SeatVo {\r\n        let loop = 0;\r\n        let nextSeat = null;\r\n        let nextIndex = btIndex + 1;\r\n        while (loop < this.node_player_list.length) {\r\n            nextIndex = nextIndex % this.node_player_list.length;\r\n            let seat = ZJH_Help.getSeatBySeatId(nextIndex);\r\n            if (seat.accountId !== '' && seat.accountId !== '0' &&\r\n                seat.bGamed === 1 && seat.btState !== ZJH_Help.ZJH_BT_State.ACT_STATE_DROP) {\r\n                nextSeat = seat;\r\n                break;\r\n            }\r\n            nextIndex++;\r\n            loop++;\r\n        }\r\n        return nextSeat;\r\n    }\r\n}\r\n"]}