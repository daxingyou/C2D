{"version":3,"sources":["Game_GoldBase.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\SceneScript\\ZJH","sourcesContent":["import { mp_manager } from './../../Modules/ModuleManager';\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nconst gatherGoldTime: number = 0.5;//聚集金币的时间\r\nconst flyGoldTimes: number = 10;   //飞金币的次数\r\nconst flyBaseTime: number = 0.12;     //飞金币的基本时间\r\nconst everyEnemyActionTime: number = 0.6; //每个对象动作时间\r\n\r\n@ccclass\r\nexport default class Game_GoldBase extends cc.Component {\r\n\r\n    @property({\r\n        type: cc.Prefab,\r\n        tooltip: '对象预设'\r\n    })\r\n    enemyPrefab: cc.Prefab = null;\r\n\r\n    @property({\r\n        type: [cc.SpriteFrame],\r\n        tooltip: '对象图片列表'\r\n    })\r\n    goldImgList: cc.SpriteFrame[] = [];\r\n\r\n    /**\r\n     * 对象池\r\n     * @type {cc.NodePool}\r\n     * @memberof Game_GoldBase\r\n     */\r\n    _enemyPool: cc.NodePool = new cc.NodePool('Game_Gold');\r\n\r\n    onLoad() {\r\n    }\r\n\r\n    /**\r\n     * 是否释放对象\r\n     * @param {cc.Node} target  目标节点\r\n     * @param {*} [cb]          回调函数\r\n     * @param {boolean} [isRelease=true]  是否释放\r\n     * @param {cc.Node} [parentNode=null] 父节点\r\n     * @param {boolean} [isDestory=true]  是否销毁目标节点\r\n     * @memberof Game_GoldBase\r\n     */\r\n    removeAllEnemyNode(target: cc.Node, cb?: any, isRelease: boolean = true, parentNode: cc.Node = null, isDestory: boolean = false) {\r\n        while (target.childrenCount > 0) {\r\n            let enemy = target.getChildByName('Game_Gold');\r\n            //放到对象池中\r\n            if (isRelease) {\r\n                this._enemyPool.put(enemy);\r\n            } else {\r\n                //更改父节点为父节点\r\n                enemy.parent = parentNode;\r\n            }\r\n            //如果没有了子节点\r\n            if (target.childrenCount <= 0) {\r\n                if (cb) {\r\n                    cb();\r\n                }\r\n                if (isDestory) {\r\n                    target.destroy();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建动作节点\r\n     * @param {cc.Vec2} pos   坐标点\r\n     * @param {cc.Node} parentNode 父节点\r\n     * @param {cc.Vec2} acSize   动作节点大小\r\n     * @param {*} [initCB]    创建完成的回调\r\n     * @memberof Game_GoldBase\r\n     */\r\n    createAcNode(pos: cc.Vec2, parentNode: cc.Node, acSize: cc.Vec2, initCB?: any) {\r\n        let AcNode = new cc.Node('AcNode');\r\n        AcNode.setPosition(pos);\r\n        AcNode.width = acSize.x;\r\n        AcNode.height = acSize.y;\r\n        AcNode.parent = parentNode;\r\n\r\n        //创建完成的回调方法\r\n        if (initCB) {\r\n            initCB(AcNode);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建对象\r\n     * @param {number} enemyType 对象类型\r\n     * @param {cc.Node} parentNode 父节点\r\n     * @param {*} [initCB]       回调函数\r\n     * @memberof Game_GoldBase\r\n     */\r\n    createEnemyNode(enemyType: number, parentNode: cc.Node, initCB?: any) {\r\n        let enemy = null;\r\n        if (this._enemyPool.size() > 0) { // 通过 size 接口判断对象池中是否有空闲的对象\r\n            enemy = this._enemyPool.get();\r\n        } else { // 如果没有空闲对象，也就是对象池中备用对象不够时，我们就用 cc.instantiate 重新创建\r\n            enemy = cc.instantiate(this.enemyPrefab);\r\n        }\r\n        let script = enemy.getComponent('Game_Gold');\r\n        script.initData(this.goldImgList[enemyType], parentNode);\r\n        //对象池的回调方法\r\n        if (initCB) {\r\n            initCB(enemy);\r\n        }\r\n    }\r\n\r\n    /**\r\n     *创建对象集\r\n     * @param {number} enemyType 对象类型\r\n     * @param {cc.Node} parentNode 父节点\r\n     * @memberof Game_GoldBase\r\n     */\r\n    createChip(enemyType: number, parentNode: cc.Node) {\r\n        this.createEnemyNode(enemyType, parentNode, (enemy) => {\r\n            // enemy.rotation = (Math.random() * 10000) % 360;\r\n            let lr = Math.floor(Math.random() * 100 + 100) % 2;\r\n            let betX = Math.floor(Math.random() * (parentNode.width - enemy.width) * 0.5);\r\n            if (lr === 0) {\r\n                betX = 0 - betX;\r\n            }\r\n            let betY = Math.floor(Math.random() * (parentNode.height - enemy.height) * 0.5);\r\n            lr = Math.floor(Math.random() * 100 + 100) % 2;\r\n            if (lr === 0) {\r\n                betY = 0 - betY;\r\n            }\r\n            enemy.setPosition(cc.p(betX, betY));\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 创建押注池显示金币\r\n     * @param {number[]} numList  数字列表\r\n     * @param {cc.Node} parentNode 父节点\r\n     * @memberof Game_GoldBase\r\n     */\r\n    createMoreGold(numList: number[], parentNode: cc.Node) {\r\n        for (var i = 0; i < numList.length; i++) {\r\n            let num = numList[i];\r\n            let enemyType = this.goldImgList.length - 1 - i;\r\n            for (var j = 0; j < num; j++) {\r\n                this.createChip(enemyType, parentNode);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     *  删除多余的\r\n     * @param {cc.Node} target 目标节点\r\n     * @param {number} [max=20] 最多存在\r\n     * @memberof Game_GoldBase\r\n     */\r\n    deleteSpilth(target: cc.Node, max: number = 150) {\r\n        if (target.childrenCount > max) {\r\n            let i = 0;\r\n            let die = target.childrenCount - max;\r\n            while (target.childrenCount > 0) {\r\n                let enemy = target.getChildByName('Game_Gold');\r\n                //放到对象池中\r\n                this._enemyPool.put(enemy);\r\n                i++;\r\n                if (i >= die) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * 建金币并飞向下注池\r\n     * @param {cc.Vec2} startP     起始点\r\n     * @param {number[]} numList   数字列表 对应的是 图片列表 ，长度相等\r\n     * @param {cc.Vec2} acSize     动作节点的大小\r\n     * @param {cc.Node} parentNode 动作播放父节点\r\n     * @param {cc.Node} targetNode 动作完成后金币父节点(目标节点)\r\n     * @param {*} [cb]             回调\r\n     * @memberof Game_GoldBase\r\n     */\r\n    playGoldMoveToPool(startP: cc.Vec2, numList: number[], acSize: cc.Vec2, parentNode: cc.Node, targetNode: cc.Node, cb?: any) {\r\n        this.deleteSpilth(targetNode);\r\n        this.createAcNode(startP, parentNode, acSize, (AcNode) => {\r\n            mp_manager.playCoinMove();\r\n            for (var i = 0; i < numList.length; i++) {\r\n                let num = numList[i];\r\n                let enemyType = this.goldImgList.length - 1 - i;\r\n                for (var j = 0; j < num; j++) {\r\n                    this.createChip(enemyType, AcNode);\r\n                }\r\n            }\r\n            AcNode.scale = 0.1;\r\n            let endP = this.getWorldPos(targetNode.parent, targetNode.getPosition());\r\n            let moveTo = cc.moveTo(everyEnemyActionTime, endP);\r\n            let action = moveTo.easing(cc.easeExponentialOut());\r\n            let spawn = cc.spawn(cc.scaleTo(0.1, 1), action);\r\n            let finished = cc.callFunc(() => {\r\n                this.removeAllEnemyNode(AcNode, cb, false, targetNode, false);\r\n            }, this);\r\n            let seq = cc.sequence(spawn, finished);\r\n            AcNode.runAction(seq);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 获取世界坐标\r\n     * @param {cc.Node} node 父节点\r\n     * @param {cc.Vec2} pos  节点坐标\r\n     * @returns \r\n     * @memberof Game_GoldBase\r\n     */\r\n    getWorldPos(node: cc.Node, pos: cc.Vec2) {\r\n        let targetP = node.convertToWorldSpaceAR(pos);\r\n        //依然是以屏幕左下角为起点,所以要减去一半\r\n        targetP.x = targetP.x - this.node.width / 2;\r\n        targetP.y = targetP.y - this.node.height / 2;\r\n        return targetP;\r\n    }\r\n\r\n    /**\r\n     * 玩家赢取所有的金币 （只有一个节点在做动作，同时到达）\r\n     * @param {boolean} isAct      是否先播放动作，再清除对象\r\n     * @param { cc.Vec2} endP      动作结束坐标点\r\n     * @param {cc.Node} targetNode  目标节点\r\n     * @param {cc.Node} parentNode  动作节点\r\n     */\r\n    playAllGoldMoveToPlayer(isAct: boolean, endP: cc.Vec2, targetNode: cc.Node, parentNode: cc.Node) {\r\n        if (isAct) {//如果先播放动作，再清除对象\r\n            mp_manager.playZJH('coins');\r\n            //根据目标节点，复制一个临时节点\r\n            let tempNode = cc.instantiate(targetNode);\r\n            let targetP = this.getWorldPos(targetNode.parent, targetNode.getPosition());\r\n            tempNode.setPosition(targetP);\r\n            tempNode.parent = parentNode;\r\n            let finished = cc.callFunc(() => {\r\n                this.removeAllEnemyNode(tempNode, null, true, null, true);\r\n            }, this);\r\n            let moveTo = cc.moveTo(everyEnemyActionTime, endP);\r\n            let action = moveTo.easing(cc.easeExponentialIn());\r\n            let spawn = cc.spawn(cc.scaleTo(everyEnemyActionTime, 0.5), action);\r\n            let seq = cc.sequence(spawn, finished);\r\n            tempNode.runAction(seq);\r\n            this.removeAllEnemyNode(targetNode);\r\n        } else {\r\n            this.removeAllEnemyNode(targetNode);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 创建多个对象，并从起始点动作到目标点\r\n     * @param {cc.Vec2} startP   动作起始点\r\n     * @param {cc.Vec2} endP     动作结束点\r\n     * @param {number[]} numList    数字列表 对应的是 图片列表 ，长度相等\r\n     * @param {cc.Vec2} acSize   动作节点大小\r\n     * @param { cc.Node} parentNode  动作父节点\r\n     * @param {any} cb       动作完成回调\r\n     */\r\n    playGoldPosToPos(startP: cc.Vec2, endP: cc.Vec2, numList: number[], acSize: cc.Vec2, parentNode: cc.Node, cb) {\r\n        this.createAcNode(startP, parentNode, acSize, (AcNode) => {\r\n            for (var i = 0; i < numList.length; i++) {\r\n                let num = numList[i];\r\n                let enemyType = this.goldImgList.length - 1 - i;\r\n                for (var j = 0; j < num; j++) {\r\n                    this.createChip(enemyType, AcNode);\r\n                }\r\n            }\r\n\r\n            let finished = cc.callFunc(() => {\r\n                this.removeAllEnemyNode(AcNode, cb, true);\r\n            }, this);\r\n            let action = cc.moveTo(everyEnemyActionTime, endP);\r\n            let spawn = cc.spawn(cc.scaleTo(everyEnemyActionTime, 0.5), action);\r\n            let seq = cc.sequence(spawn, finished);\r\n            AcNode.runAction(seq);\r\n        });\r\n    }\r\n\r\n    /**\r\n     *  玩家赢取所有的金币 （每个金币都在做动作，不同时到达）\r\n     * @param {cc.Vec2} endP        结束位置\r\n     * @param {cc.Node} targetNode  目标节点\r\n     * @param {any} startCB         第一个动作结束时的回调\r\n     * @param {any} endCB           最后一个动作结束时的回调\r\n     * @param {boolean} [isTogather=false]  是否聚拢\r\n     * @param {cc.Vec2} [scopeSize=cc.v2(80, 80)] 聚拢的范围\r\n     * @memberof Game_GoldBase\r\n     */\r\n    playGoldMoveToPlayer(endP: cc.Vec2, targetNode: cc.Node, startCB, endCB, isTogather: boolean = false, scopeSize: cc.Vec2 = cc.v2(60, 60)) {\r\n        if (isTogather) {\r\n            let nodeList = targetNode.children;\r\n            let finished = cc.callFunc(() => {\r\n                this.playFlyAllGoldAction(endP, targetNode, startCB, endCB);\r\n            }, this);\r\n            for (var i = 0; i < nodeList.length; i++) {\r\n                let enemy = nodeList[i];\r\n                let action = null;\r\n                if (i !== nodeList.length - 1) {\r\n                    if (Math.abs(enemy.x) > scopeSize.x || Math.abs(enemy.y) > scopeSize.y) {\r\n                        action = cc.moveTo(gatherGoldTime, cc.p(Math.random() * scopeSize.x, Math.random() * scopeSize.y));\r\n                    }\r\n                } else {\r\n                    action = cc.sequence(cc.moveTo(gatherGoldTime, cc.p(Math.random() * scopeSize.x, Math.random() * scopeSize.y)), finished);\r\n                }\r\n                if (action) {\r\n                    enemy.runAction(action);\r\n                }\r\n            }\r\n        } else {\r\n            this.playFlyAllGoldAction(endP, targetNode, startCB, endCB);\r\n        }\r\n    }\r\n    /**\r\n     * 播放从目标节点中取出所有的 对象，飞到目标点，这个动作是异步的(不同时到达目标点)\r\n     * \r\n     * @param {cc.Vec2} endP \r\n     * @param {cc.Node} targetNode \r\n     * @param {any} startCB \r\n     * @param {any} endCB \r\n     * @memberof Game_GoldBase\r\n     */\r\n    private playFlyAllGoldAction(endP: cc.Vec2, targetNode: cc.Node, startCB, endCB) {\r\n        let count = targetNode.childrenCount;\r\n        //每次可以做动作的数量\r\n        let num = Math.round(count / flyGoldTimes);\r\n        if (num < 1) {\r\n            num = 1;\r\n        }\r\n        let isStart = true;\r\n        let nodeList = targetNode.children;\r\n        let finished = cc.callFunc((enemy) => {\r\n            //动作完成,放到对象池中\r\n            this._enemyPool.put(enemy);\r\n            //如果是开始\r\n            if (isStart) {\r\n                if (startCB) {\r\n                    startCB();\r\n                }\r\n                isStart = false;\r\n                cc.log('开始回调' + isStart);\r\n            }\r\n            //如果是结束\r\n            if (targetNode.childrenCount <= 0) {\r\n                if (endCB) {\r\n                    endCB();\r\n                }\r\n                cc.log('结束回调');\r\n            }\r\n        }, this);\r\n        for (var i = 0; i < nodeList.length; i++) {\r\n            let enemy = nodeList[i];\r\n            let moveTo = cc.moveTo(flyBaseTime * (i / num + 1), endP);\r\n            // let action = moveTo.easing(cc.easeExponentialIn());\r\n            let seq = cc.sequence(moveTo, finished);\r\n            enemy.runAction(seq);\r\n        }\r\n    }\r\n}\r\n"]}